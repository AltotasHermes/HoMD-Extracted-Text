if (BoxMode == "Event")
            oPlayer.LastVisitedForSavePurposes = "Fractal Fortress"
            FileSelected = "SaveFile0.homd"
        else if (DialogueScreen == "FirstScreen")
                ("F")
                ("RACTAL FORTRESS")
                ("An explosion of intersecting architectural impossibilities that only vaguely resemble a castle. Stairways that loop beneath themselves, walls at bizarre angles, ramparts built in defiance of gravity, geometry and common sense... It hurts your eyes.")
                ("There is something ancient slumbering beneath the Fortress, you just know it. You can feel its presence, like an abscess on the roof of your mouth.")
                    ("Just looking at the Fortress is enough to fracture your mind.")
                    ("Gained x1 Mind-shattering Disruption", "Logbook", 3)
                    (("New location visited. " + ApprehensionsString), "Logbook", 4)
                        FileSelected = "SaveFile0.homd"
                if (oPlayer.LastVisited != "Fractal Fortress" && global.FractalFortress1 == 0)
                    ("Delve into the Fortress.", "Something waits beneath.", "")
                if (oPlayer.LastVisited != "Fractal Fortress" && global.FractalFortress2 == 0)
                    ("Sketch the Fortress.", "Its angles and obscurities are fascinating.", "")
                ("Inside the kinetopede.", "Here you can find all miscellaneous options.")
                ("F")
                ("RACTAL FORTRESS")
                    ("An explosion of intersecting architectural impossibilities that only vaguely resemble a castle. Stairways that loop beneath themselves, walls at bizarre angles, ramparts built in defiance of gravity, geometry and common sense... It hurts your eyes.")
                    ("There is something ancient slumbering beneath the Fortress, you just know it. You can feel its presence, like an abscess on the roof of your mouth.")
                    if (oPlayer.LastVisited != "Fractal Fortress" && global.FractalFortress1 == 0)
                        ("Delve into the Fortress.", "Something waits beneath.", "")
                    if (oPlayer.LastVisited != "Fractal Fortress" && global.FractalFortress2 == 0)
                        ("Sketch the Fortress.", "Its angles and obscurities are fascinating.", "")
                    ("An explosion of intersecting architectural impossibilities that only vaguely resemble a castle. Stairways that loop beneath themselves, walls at bizarre angles, ramparts built in defiance of gravity, geometry and common sense... It hurts your eyes.")
                    if (oPlayer.LastVisited != "Fractal Fortress" && global.FractalFortress2 == 0)
                        ("Sketch the Fortress.", "Its angles and obscurities are fascinating.", "")
                ("Inside the kinetopede.", "Here you can find all miscellaneous options.")
        else if (DialogueScreen == "SecondScreen" && LeavingTheCity == 1 && TooHeavyToLeaveTheCity == 0)
            ("I")
            ("NTO THE DARK")
            ("You can only go east. The Doors are locked on all other sides.")
            ("On second thoughts...", "There are matters here that still merit attention.", "#"0, 0.8)
            ("Pore over the map.", "Orient yourself before you launch off into the ravenous dark.")
                    BoxMode = "Map"
            ("East", "Back to the House.")
                oPlayer.LastVisited = "Fractal Fortress"
                LeavingSpecialRoomDialogueBox("East")
        else if (DialogueScreen == "SecondScreen" && LeavingTheCity == 1 && TooHeavyToLeaveTheCity == 1)
        else if (DialogueScreen == "SecondScreen" && WanderTheStreets == 1)
            ("F")
            ("RACTAL FORTRESS")
            ("As you and your crew trek up the contorted stairway toward the Fortress, you pass beneath corpses hanging from the arch. One of them twists slightly in its noose, and you recognize your own face.")
            ("You turn away in instinctive shock. When you look back, the corpses are gone.")
            ("Closer to the Fortress, you feel a sharp ache behind your eyes. The architecture is constantly shifting. Somehow, you find yourself back at the bottom of the stairs.")
            ("Lost some Sanity", "Sanity", 0)
            ("Gained x1 Disquieting Incident", "Logbook", 3)
            ("Attempt to reach the Fortress.", "Close your eyes. Let your feet take you to the door.", "Insight", 61)
            NeedsScrutinyItem("You understand this place.", "Impossible geometries. Unfeasible angles. This looks like the handiwork of a certain god...", "[Requires 4+ Divine Scrutiny: Anglecrab or Divine Favour: Anglecrab.]", HasCrabs)
            ("Return to the kinetopede.", "Best to leave before this gets worse.", "")
        else if (DialogueScreen == "SecondScreen" && Delve1 == 1 && WasChallengeSuccessful == 1)
            ("F")
            ("RACTAL FORTRESS")
            ("When you open your eyes, you are outside the Fortress's front gate. Exchanging nods with the rest of your crew, you pull the lever and enter the Fortress itself.")
            ("Inside, you find dust-drenched corridors of bleak grey stone. These, too, twist and turn in impossible contortions. At one point you pass yourselves going in the opposite direction, studiously avoiding each other's gazes and trying not to be sick.")
            ("Down, down, always down... Through a garden of fountains where water falls upward. Past a room of flitting ghosts who resemble your crew as children. As you reach the bottom of one staircase, you almost walk past a side-room filled with mountains of gold coins.")
            ("Lost some Sanity", "Sanity", 0)
            ("(You passed an Insight challenge!)", "Challenge", 2)
            ("Gained x1 Disquieting Incident", "Logbook", 3)
            ("Press on, past the treasure-room.", "The thing below is calling to you.", "")
            ("Investigate the treasure-room.", "Look at all those guineas, just there for the taking!", "")
            ("Return to the kinetopede.", "Best to leave before this gets worse.", "")
        else if (DialogueScreen == "SecondScreen" && Delve1 == 1 && WasChallengeSuccessful == 0)
            ("F")
            ("RACTAL FORTRESS")
            ("When you open your eyes, you are still standing at the bottom of the stairs. No matter how many times you try to climb, it twists and folds and deposits you back at the beginning.")
            ("Lost some Sanity", "Sanity", 0)
            ("(You failed an Insight challenge...)", "Challenge", 2)
            ("Return to the kinetopede.", "This is hopeless.", "")
        else if (DialogueScreen == "SecondScreen" && Delve2 == 1)
            ("F")
            ("RACTAL FORTRESS")
            ("You think back to Anglecrab's teachings, and begin to climb. Soon you are outside the Fortress's front gate. Exchanging nods with the rest of your crew, you pull the lever and enter the Fortress itself.")
            ("Inside, you find dust-drenched corridors of bleak grey stone. These, too, twist and turn in impossible contortions. At one point you pass yourselves going in the opposite direction, studiously avoiding each other's gazes and trying not to be sick.")
            ("Down, down, always down... Through a garden of fountains where water falls upward. Past a room of flitting ghosts who resemble your crew as children. As you reach the bottom of one staircase, you almost walk past a side-room filled with mountains of gold coins.")
            ("Lost some Sanity", "Sanity", 0)
            ("(You passed an Insight challenge!)", "Challenge", 2)
            ("Gained x1 Disquieting Incident", "Logbook", 3)
            ("Press on, past the treasure-room.", "The thing below is calling to you.", "")
            ("Investigate the treasure-room.", "Look at all those guineas, just there for the taking!", "")
            ("Return to the kinetopede.", "Best to leave before this gets worse.", "")
        else if (DialogueScreen == "SecondScreen" && Delve3 == 1)
            ("F")
            ("RACTAL FORTRESS")
            ("Down even deeper. Down into the dark.")
            ("In the cold vaults beneath the Fractal Fortress, you discover a giant steel cage, floating above a bottomless pit. Inside is a wooden crate, unsupported, gently turning.")
            ("Climb up to the cage.", "Your limbs feel heavier, somehow. Is gravity different here?", "Guts", 54)
            ("Return to the kinetopede.", "Something isn't right.", "")
        else if (DialogueScreen == "SecondScreen" && Delve4 == 1)
            ("F")
            ("RACTAL FORTRESS")
            ("As you walk into the treasure-room, a tide of inexpressible joy rushes over you. You wade out amongst the coins, throwing them up into the air, laughing at your good fortune. You're rich!")
            ("You bury yourself in gold, still laughing. You could stay here forever...")
            ("Resist.", "This is some kind of glamour, affecting your mind. Fight it.", "Spirit", 88)
        else if (DialogueScreen == "SecondScreen" && Delve5 == 1 && WasChallengeSuccessful == 1)
            ("F")
            ("RACTAL FORTRESS")
            ("With ropes and hooks, you manage to climb up to the cage and slip between the bars. The crate, you realize, is actually six trapdoors, each with an iron ring to pull it open.")
            ("You heave open a trapdoor, revealing a hundred-yard shaft down to a lightless cell. (It's nestled impossibly in a crate only six feet wide, of course, but at this point disruptions of physical space don't faze you.)")
            ("In the cell at the bottom of the shaft lies an open coffin. In the coffin, a child. A boy. Pale. Lifeless.")
            ("(You passed a Guts challenge!)", "Challenge", 3)
            ("Retrieve the coffin.", "Is the Fortress this child's tomb? Or its prison?", "")
            ("Leave the coffin alone.", "Something isn't right.", "")
        else if (DialogueScreen == "SecondScreen" && Delve5 == 1 && WasChallengeSuccessful == 0)
            ("F")
            ("RACTAL FORTRESS")
            ("With ropes and hooks, you try to climb up to the cage and slip between the bars. For the first few attempts, you fail miserably and end up badly spraining your ankle.")
            ("Eventually, though, you're able to get up there. The crate is actually six trapdoors, each with an iron ring to pull it open.")
            ("You heave open a trapdoor, revealing a hundred-yard shaft down to a lightless cell. (It's nestled impossibly in a crate only six feet wide, of course, but at this point disruptions of physical space don't faze you.)")
            ("In the cell at the bottom of the shaft lies an open coffin. In the coffin, a child. A boy. Pale. Lifeless.")
            ("(You failed a Guts challenge...)", "Challenge", 3)
            ("Retrieve the coffin.", "Is the Fortress this child's tomb? Or its prison?", "")
            ("Leave the coffin alone.", "Something isn't right.", "")
        else if (DialogueScreen == "SecondScreen" && Delve6 == 1 && WasChallengeSuccessful == 1)
            ("F")
            ("RACTAL FORTRESS")
            ("You come to your senses, and realize that the vault is empty. Not a coin in sight.")
            ("(You passed a Spirit challenge!)", "Spirit", 7)
            ("Head deeper.", "The thing below is still calling to you.", "")
            ("Return to the kinetopede.", "Best to leave before this gets worse.", "")
        else if (DialogueScreen == "SecondScreen" && Delve6 == 1 && WasChallengeSuccessful == 0)
            ("F")
            ("RACTAL FORTRESS")
            ("For a while after that, everything is a blur of gold. Apparently, when your crew's search-party finally found you, you were lying in the middle of an empty vault with a smile on your face, scarcely breathing.")
            ("Lost some Sanity", "Sanity", 0)
            ("(You failed a Spirit challenge...)", "Spirit", 7)
            ("You spent 3 day playing amongst imaginary coins!", "Time", 3)
            ("They take you back to the kinetopede.", "It's a while before you can be induced to speak sense, or recognize colours.", "")
        else if (DialogueScreen == "SecondScreen" && Delve7 == 1)
            ("F")
            ("RACTAL FORTRESS")
            ("Something about the boy in the coffin seems familiar. As you leave the Fortress with your prize, you swear you can hear manic laughter echoing through the halls.")
            ("Gained x1 Disquieting Incident", "Logbook", 3)
            ("Gained x1 Aspect of the Trickster", "Aspect", 3)
            ("Return to the kinetopede.", ".", "")
        else if (DialogueScreen == "SecondScreen" && Delve8 == 1)
            ("F")
            ("RACTAL FORTRESS")
            ("A last lingering look, down at the boy in the coffi. Then you turn and leave the Fortress behind.")
            ("Gained some Sanity", "Sanity", 1)
            ("Return to the kinetopede.", ".", "")
        else if (DialogueScreen == "SecondScreen" && Sketch1 == 1)
            ("F")
            ("RACTAL FORTRESS")
            ("You spend a day working on your sketch. The result is a chaotic scrawl, barely recognizable as a castle - the Fortress's dimensions kept changing as you bent over the paper. Still, you feel like some small part of you understands impossibility better.")
            ("Gained x1 Breathtaking Spectacle", "Logbook", 3)
            ("You spent 1 day sketching!", "Time", 3)
            ReligionText("Anglecrab", 1, 1)
            ("Return to the kinetopede.", ".", "")
                ReligionItemAdd("Anglecrab", 1, 1)
        else if (DialogueScreen == "SecondScreen" && MiscellaneousEvent == 1)
        else if (DialogueScreen == "SecondScreen" && MiscOptions == 1)
            ("C")
            ("APTAIN'S QUARTERS")
            ("The machine greets you with a steady, soothing hum. In your quarters, you can safely decide what side activity to pursue. Deal with prisoners? Drink something? Operate on your own memories, perhaps?")
            ("Return to location.", "")
        else if (DialogueScreen == "LastScreen")
            ("T")
            ("EST")
            ("Successful test.")
            ("Return.", "", "")
    draw_text(((view_wport[(0 << 0)] * 0.5) - 3), ((view_hport[(0 << 0)] * 0.75) - 3), "The Fractal Fortress")
    draw_text((view_wport[(0 << 0)] * 0.5), (view_hport[(0 << 0)] * 0.75), "The Fractal Fortress")
