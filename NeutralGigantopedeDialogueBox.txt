if (BoxMode == "Event")
    if (NearestKinetopede.TypeOfEnemy == "LamplighterGuard")
        if (DialogueScreen == "FirstScreen")
            ("T")
            ("HE LAMPLIGHTER GUARD")
                ("The Lamplighters patrol between the Cities, maintaining lanterns and driving off bandits. They greet you politely, but don't seem much interested in exchanging pleasantries.")
                ("Attack.", "They are ready for you.")
                ("Leave.", "The Lamplighters pay you no mind.")
                ("A pause before the Lamplighters recognize you. Then the penny drops. " + '"' + "Ready the guns!" + '"')
                ("[They are attacking because you have -10 or less Reputation: The City of Keys.", "", 0)
                ("Fight back.", "You're well on your way to becoming more notorious than Clayton Canker himself.")
                    StartCombat("Neutral Gigantopede", NearestKinetopede.HullSeed, NearestKinetopede.WillSeed, global.NameArgumentArray, global.CrewNumbersAndAppearanceArray, NearestKinetopede.NumberOfEnemyWeapons, NearestKinetopede.RandomSeed)
        else if (DialogueScreen == "SecondScreen" && AttackingShiftyCrew == 1)
            ("T")
            ("HE LAMPLIGHTER GUARD")
            ("Their guns swivel almost in tandem with your own. They don't bother to issue a warning.")
            ("-2 Reputation: The City of Keys", "Reputation", 5)
            ("Fire.", "")
                StartCombat("Neutral Gigantopede", NearestKinetopede.HullSeed, NearestKinetopede.WillSeed, global.NameArgumentArray, global.CrewNumbersAndAppearanceArray, NearestKinetopede.NumberOfEnemyWeapons, NearestKinetopede.RandomSeed)
        else if (DialogueScreen == "FirstScreen" && NearestKinetopede.FleeFromPlayer == 1)
        else if (DialogueScreen == "SecondScreen" && WasChallengeSuccessful == 1 && Flee == 1)
        else if (DialogueScreen == "SecondScreen" && EnemyFleeing == 1)
        else if (DialogueScreen == "SecondScreen" && PlayerDeath == 1)
        else if (DialogueScreen == "SecondScreen" && EnemyDeath == 1 && oInventories.EnemyVehicleLeftIntact == 0)
            ("V")
            ("ICTORIOUS")
            ("Your artillery tears the Lamplighters' gigantopede to ribbons. Plumes of ash and smoke stretch to the ceiling. Time to see if there's anything left to salvage.")
            ("-2 Reputation: The City of Keys", "Reputation", 5)
            ("You have won! Sanity recovers slightly.", "Sanity", 1)
            ("You live to fight again.", "Is there anything left to salvage?")
        else if (DialogueScreen == "SecondScreen" && EnemyLoot == 1)
        else if (DialogueScreen == "SecondScreen" && ComparingMaps == 1)
        else if (DialogueScreen == "SecondScreen" && EnemyDeath == 1 && oInventories.EnemyVehicleLeftIntact == 1)
            ("V")
            ("ICTORIOUS")
            ("The gigantopede is battered but intact, its crew dead. You can search for loot at your leisure.")
            ("You have won! Sanity recovers slightly.", "Sanity", 1)
            ("You live to fight again.", "Tear it apart. Take everything there is.")
        else if (DialogueScreen == "SecondScreen" && TybaltQuest1 == 1)
    else if (NearestKinetopede.TypeOfEnemy == "BoredSoldiers")
        if (DialogueScreen == "FirstScreen")
            ("B")
            ("ORED SOLDIERY")
                ("They ask half-heartedly if you're a bandit or an enemy of the Cities, clearly hoping you'll answer in the affirmative.")
                ('"' + "All these toys, and no-one to bloody use 'em on," + '"' + " grumbles their commander through the radio. " + '"' + "Any news from home, mate?" + '"')
                    NeedsInformationItem("Share news from the City.", "They'll repay you with gossip.", HaveNews)
                ("Attack.", "This will get their blood pumping.")
                ("Farewell.", "A bored sigh is your only reply.")
                ("A pause before the soldiers recognize you. Then the penny drops. " + '"' + "Ready the guns!" + '"')
                ("[They are attacking because you have -10 or less Reputation: The City of Keys.", "", 0)
                ("Fight back.", "You're well on your way to becoming more notorious than Clayton Canker himself.")
                    StartCombat("Neutral Gigantopede", NearestKinetopede.HullSeed, NearestKinetopede.WillSeed, global.NameArgumentArray, global.CrewNumbersAndAppearanceArray, NearestKinetopede.NumberOfEnemyWeapons, NearestKinetopede.RandomSeed)
        else if (DialogueScreen == "FirstScreen" && NearestKinetopede.FleeFromPlayer == 1)
        else if (DialogueScreen == "SecondScreen" && WasChallengeSuccessful == 1 && Flee == 1)
        else if (DialogueScreen == "SecondScreen" && EnemyFleeing == 1)
        else if (DialogueScreen == "SecondScreen" && PlayerDeath == 1)
        else if (DialogueScreen == "SecondScreen" && EnemyDeath == 1 && oInventories.EnemyVehicleLeftIntact == 0)
            ("V")
            ("ICTORIOUS")
            ("Your artillery tears the military gigantopede to ribbons. Plumes of ash and smoke stretch to the ceiling. Time to see if there's anything left to salvage.")
            ("You have won! Sanity recovers slightly.", "Sanity", 1)
            ("You live to fight again.", "Is there anything left to salvage?")
        else if (DialogueScreen == "SecondScreen" && EnemyLoot == 1)
        else if (DialogueScreen == "SecondScreen" && ComparingMaps == 1)
        else if (DialogueScreen == "SecondScreen" && EnemyDeath == 1 && oInventories.EnemyVehicleLeftIntact == 1)
            ("V")
            ("ICTORIOUS")
            ("The military gigantopede is battered but intact, its crew dead. You can search for loot at your leisure.")
            ("You have won! Sanity recovers slightly.", "Sanity", 1)
            ("You live to fight again.", "Tear it apart. Take everything there is.")
        else if (DialogueScreen == "SecondScreen" && Attacking == 1)
            ("B")
            ("ORED SOLDIERY")
            ("Your guns swivel. " + '"' + "Incoming fire!" + '"' + " shouts the soldier on the radio, ecstatic.")
            ("-2 Reputation: The City of Keys", "Reputation", 5)
            ("Fire.", "")
                StartCombat("Neutral Gigantopede", NearestKinetopede.HullSeed, NearestKinetopede.WillSeed, global.NameArgumentArray, global.CrewNumbersAndAppearanceArray, NearestKinetopede.NumberOfEnemyWeapons, NearestKinetopede.RandomSeed)
        else if (DialogueScreen == "SecondScreen" && BlackMarketShiftyCrew == 1)
            ("B")
            ("ORED SOLDIERY")
                ("You share news of the city, and the soldiers respond with the various tidbits of scurrilous gossip they've picked up over the years.")
                ("Gained x1 Scandalous Gossip", "Logbook", 4)
                ("Farewell.", "The soldiers wave you off warmly.")
                ("You share news of the city, and the soldiers respond with the things they have seen out in the darkness of the House - strange things they can't explain, but can describe.")
                ("Gained x3 Apprehensions", "Logbook", 4)
                ("Farewell.", "Telling you about their experiences leaves the soldiers subdued.")
                ("You share news of the city, and the soldiers offer you all kinds of horror-stories about fellow soldiers who spent too long in darkness and went mad. They tell tales of blood-soaked floors, captains ripped apart by their crew, even auto-cannibalism. The details are vague, however; it mostly smacks of fiction.")
                ("Gained x1 Lurid Tale", "Logbook", 3)
                ("Farewell.", "The soldiers wave you off warmly.")
        else if (DialogueScreen == "SecondScreen" && TybaltQuest1 == 1)
    else if (NearestKinetopede.TypeOfEnemy == "TravellingNobles")
        if (DialogueScreen == "FirstScreen")
            ("W")
            ("ELL-TO-DO TRAVELLERS")
            ("A lumbering gigantopede, a huge cohort of bodyguards, a luxurious decor - this is clearly a wealthy group of travellers. " + '"' + "Don't come any nearer or we'll fire," + '"' + " the captain tells you bluntly.")
            ("Attack.", "Rich pickings.")
            ("Goodbye.", "No need to antagonize them.")
        else if (DialogueScreen == "SecondScreen" && Attacking == 1)
            ("W")
            ("ELL-TO-DO TRAVELLERS")
            ('"' + "You're making a mistake," + '"' + " the captain tells you.")
            ('"' + "No undue disturbance of the liquor cabinet, please," + '"' + " calls a reedy voice behind him.")
            ("-2 Reputation: The City of Keys", "Reputation", 5)
            ("Fire.", "")
                StartCombat("Neutral Gigantopede", NearestKinetopede.HullSeed, NearestKinetopede.WillSeed, global.NameArgumentArray, global.CrewNumbersAndAppearanceArray, NearestKinetopede.NumberOfEnemyWeapons, NearestKinetopede.RandomSeed)
        else if (DialogueScreen == "FirstScreen" && NearestKinetopede.FleeFromPlayer == 1)
        else if (DialogueScreen == "SecondScreen" && WasChallengeSuccessful == 1 && Flee == 1)
        else if (DialogueScreen == "SecondScreen" && EnemyFleeing == 1)
        else if (DialogueScreen == "SecondScreen" && PlayerDeath == 1)
        else if (DialogueScreen == "SecondScreen" && EnemyDeath == 1 && oInventories.EnemyVehicleLeftIntact == 0)
            ("V")
            ("ICTORIOUS")
            ("Your artillery tears the gigantopede to ribbons. Plumes of ash and smoke stretch to the ceiling. Time to see if there's anything left to salvage.")
            ("You have won! Sanity recovers slightly.", "Sanity", 1)
            ("You live to fight again.", "Is there anything left to salvage?")
        else if (DialogueScreen == "SecondScreen" && EnemyLoot == 1)
        else if (DialogueScreen == "SecondScreen" && ComparingMaps == 1)
        else if (DialogueScreen == "SecondScreen" && EnemyDeath == 1 && oInventories.EnemyVehicleLeftIntact == 1)
            ("V")
            ("ICTORIOUS")
            ("The enemy gigantopede is battered but intact, its crew dead. You can search for loot at your leisure.")
            ("You have won! Sanity recovers slightly.", "Sanity", 1)
            ("You live to fight again.", "Tear it apart. Take everything there is.")
        else if (DialogueScreen == "SecondScreen" && TybaltQuest1 == 1)
