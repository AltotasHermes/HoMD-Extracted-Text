if (BoxMode == "Event")
            oPlayer.LastVisitedForSavePurposes = "Fargyle Keep"
            FileSelected = "SaveFile0.homd"
        else if (DialogueScreen == "FirstScreen")
                ("F")
                ("ARGYLE KEEP")
                ("Spires soar to the ceiling, pale as sculpted wax. Around them a moat, glimmering and lethal - that is the silver of mercury, not water. High above you, red pennants ripple in the House's strange gusts and exhalations.")
                ("The drawbridge is lowered. The Poet-Knights, it seems, are receiving visitors today.")
                    (("New location visited. " + ApprehensionsString), "Logbook", 4)
                        FileSelected = "SaveFile0.homd"
                    if (oPlayer.GuardCaptain == "Tybalt Balsamic IV")
                        ("Take Tybalt to train with the Poet-Knights.")
                    if (oPlayer.Navigator == "Cromlech")
                        ("Take Cromlech to a poetry recital.")
                    ("Gather news.", "The Poet-Knights are happy to talk. In fact, it's difficult to make them slow down long enough for you to scribble something down.", "")
                    if (oPlayer.GuardCaptain == "Ransack Morton")
                        ("Ask the Poet-Knights to train Ransack in the ideals of chivalry.")
                    if (oPlayer.GuardCaptain == "Fiona McConnaghe")
                        ("Fiona gathers her old teachers and reads them a selection of her new improved poetry.")
                    if (oPlayer.Recordkeeper == "Bradley Baggs")
                        ("Search for Bradley's daughter.", "Perhaps she managed to find her way here and fulfil her dream.")
                    if (oPlayer.ChiefEngineerWoundsTracker > 0 && oPlayer.ChiefEngineer == "Judith Grimalkin")
                        ("Convince the Poet-Knights to stage 'The Romance of Lord Reynard.'")
                    if (oPlayer.ChiefEngineerWoundsTracker > 0 && oPlayer.ChiefEngineer == "Judith Grimalkin")
                        ("'The Romance of Lord Reynard' is currently having a dress rehearsal.", '"' + "Let's see how they're getting along," + '"' + " whispers Judith.")
                    if (oPlayer.ChiefEngineerWoundsTracker > 0 && oPlayer.ChiefEngineer == "Judith Grimalkin")
                        NeedsCargoItem("You have the props for Sir Bruin's play.", "", "[Requires x1 Historical Curio, x1 Enchanted Gimmick and x3 Flares.]"0, 0.8, HasStuff)
                ("Enter the castle.", "")
                ("Inside the kinetopede.", "Here you can find all miscellaneous options.")
                ("F")
                ("ARGYLE KEEP")
                ("Spires soar to the ceiling, pale as sculpted wax. Around them a moat, glimmering and lethal - that is the silver of mercury, not water. High above you, red pennants ripple in the House's strange gusts and exhalations.")
                    if (oPlayer.GuardCaptain == "Tybalt Balsamic IV")
                        ("Take Tybalt to train with the Poet-Knights.")
                    if (oPlayer.Navigator == "Cromlech")
                        ("Take Cromlech to a poetry recital.")
                    ("Gather news.", "The Poet-Knights are happy to talk. In fact, it's difficult to make them slow down long enough for you to scribble something down.", "")
                    if (oPlayer.GuardCaptain == "Ransack Morton")
                        ("Ask the Poet-Knights to train Ransack in the ideals of chivalry.")
                    if (oPlayer.GuardCaptain == "Fiona McConnaghe")
                        ("Fiona gathers her old teachers and reads them a selection of her new improved poetry.")
                    if (oPlayer.Recordkeeper == "Bradley Baggs")
                        ("Search for Bradley's daughter.", "Perhaps she managed to find her way here and fulfil her dream.")
                    if (oPlayer.ChiefEngineerWoundsTracker > 0 && oPlayer.ChiefEngineer == "Judith Grimalkin")
                        ("Convince the Poet-Knights to stage 'The Romance of Lord Reynard.'")
                    if (oPlayer.ChiefEngineerWoundsTracker > 0 && oPlayer.ChiefEngineer == "Judith Grimalkin")
                        ("'The Romance of Lord Reynard' is currently having a dress rehearsal.", '"' + "Let's see how they're getting along," + '"' + " whispers Judith.")
                    if (oPlayer.ChiefEngineerWoundsTracker > 0 && oPlayer.ChiefEngineer == "Judith Grimalkin")
                        NeedsCargoItem("You have the props for Sir Bruin's play.", "", "[Requires x1 Historical Curio, x1 Enchanted Gimmick and x3 Flares.]"0, 0.8, HasStuff)
                ("Enter the castle.", "")
                ("Inside the kinetopede.", "Here you can find all miscellaneous options.")
        else if (DialogueScreen == "SecondScreen" && LeavingTheCity == 1 && TooHeavyToLeaveTheCity == 0)
            ("I")
            ("NTO THE DARK")
            ("Which direction will you go?")
            ("On second thoughts...", "There are matters here that still merit attention.", "#"0, 0.8)
            ("Pore over the map.", "Orient yourself before you launch off into the ravenous dark.")
                    BoxMode = "Map"
            ("North.", "To the City of Bridges, where venal versenaries sully the art of combat-poetry.")
                oPlayer.LastVisited = "Fargyle Keep"
                LeavingSpecialRoomDialogueBox("North")
            ("West.", "Just some old colony from the City of Keys. Mostly forgotten now. Everyone knew the colonies were a bad idea.")
                oPlayer.LastVisited = "Fargyle Keep"
                LeavingSpecialRoomDialogueBox("West")
            ("East.", "To the City of Masks. They have long been the Poet-Knights' ally.")
                oPlayer.LastVisited = "Fargyle Keep"
                LeavingSpecialRoomDialogueBox("East")
            ("South.", "Down to the swamps of the Entomarch.")
                oPlayer.LastVisited = "Fargyle Keep"
                LeavingSpecialRoomDialogueBox("South")
        else if (DialogueScreen == "SecondScreen" && LeavingTheCity == 1 && TooHeavyToLeaveTheCity == 1)
        else if (DialogueScreen == "SecondScreen" && MiscellaneousEvent == 1)
        else if (DialogueScreen == "SecondScreen" && MiscOptions == 1)
            ("C")
            ("APTAIN'S QUARTERS")
            ("The machine greets you with a steady, soothing hum. In your quarters, you can safely decide what side activity to pursue. Deal with prisoners? Drink something? Operate on your own memories, perhaps?")
            ("Return to location.", "")
        else if (DialogueScreen == "SecondScreen" && CromlechQuest == 1)
        else if (DialogueScreen == "SecondScreen" && TybaltQuest == 1)
        else if (DialogueScreen == "SecondScreen" && FionaQuest == 1)
        else if (DialogueScreen == "SecondScreen" && JudithQuest == 1)
        else if (DialogueScreen == "SecondScreen" && SecondJudithQuest == 1)
        else if (DialogueScreen == "SecondScreen" && ThirdJudithQuest == 1)
        else if (DialogueScreen == "SecondScreen" && BradleyQuest == 1)
        else if (DialogueScreen == "SecondScreen" && RansackQuest == 1)
        else if (DialogueScreen == "SecondScreen" && PetitionForEntrance == 1)
            ("F")
            ("ARGYLE KEEP")
            ("Knights are sparring and singing in the courtyard. Acolytes shout blistering poetry at target-dummies, who explode in showers of splinters and straw.")
                    NeedsDistinctionsItem("Petition to become a Poet-Knight.", "You are already a poet - all you need is a sword and a suit of armour.", "[Requires Distinction: Poet, 50+ Esoterica and 50+ Grit.]"0, 0.8, HasReq)
                ("Deliver the good news to Lady Juliet.", "You rescued Ezekiel from a life of slavery.", "")
                ("An evening with the Poet-Knights.", "They are fine and generous hosts, especially to an individual of the poetic persuasion.")
            ("Leave.", "There is nothing for you here.")
        else if (DialogueScreen == "SecondScreen" && WanderTheStreets == 1)
                ("F")
                ("ARGYLE KEEP")
                ("You spend the evening with old Sir Caliphus in his study, sipping fiery whiskey and listening to stories of his old battles and accomplishments. He tells his tales with a delighted grin, not at all embarrassed or self-effacing, but nor does he sound like he's boasting.")
                ("Toward the end of the night, he asks you for a story of your own. " + '"' + "Words from another world, perhaps?" + '"' + " he asks, wistful.")
                ("Gained x1 Thrilling Yarn", "Logbook", 3)
                NeedsExperienceItem("Tell a story of another world.", "Sir Caliphus closes his eyes.", (("[Costs x1 Glimpse of Another World. You currently have x" + string(ExperiencesReturnNumberOfItems(19))) + ".]"), Otherworld)
                ("You don't have a story of that sort.", "Sir Caliphus smiles ruefully, and clasps your hand in his. " + '"' + "Too much to hope for," + '"' + " he mumbles as you say your goodbyes.", "")
                ("F")
                ("ARGYLE KEEP")
                ("The Poet-Knights invite you to a bohemian evening of 'poetry and discussion.' It largely seems to involve lazing around on a circle of scattered cushions, puffing tobacco, drinking whiskey and laudanum, taking various mind-bending drugs.")
                ("Occasionally a poem is performed, to ragged applause.")
                ("Gained x1 Droll Recollection", "Logbook", 3)
                ("Espouse on the nature of art.", "You have a captive audience.", "Esoterica", 76)
                NeedsCargoItem("Pass around Colour-Dust.", "The rarest of things: A drug the Poet-Knights have not yet tried.", (("[Costs x1 Colour-Dust. You currently have x" + string(CargoReturnNumberOfItems(28))) + ".]"), HasCol)
                ("The affair winds down.", "The Knights leave, in dribs and drabs, to sleep or train or compose.", "")
        else if (DialogueScreen == "SecondScreen" && Party1 == 1 && WasChallengeSuccessful == 1)
            ("F")
            ("ARGYLE KEEP")
            ("You climb to your feet, somewhat wobbly, and begin to advance a personal pet theory about art's purpose. Despite the relaxed atmosphere here, you know that you're in tricky territory - the Knights study literature for years, and they don't tolerate fools. But your words are calm and considered and polished, and your theory is something new and exciting.")
            ("The Knights listen spellbound, hanging onto every word. When you're finished, they immediately start debating the finer details of your theory. You sit down, feeling as though you've somehow made things clearer even for yourself.")
            ("(You passed an Esoterica challenge!)", "Challenge", 1)
            ("Gained x1 Fragment of Epiphany", "Logbook", 4)
            ("The debate continues long into the night.", ".")
        else if (DialogueScreen == "SecondScreen" && GatheringNews == 1)
            ("T")
            ("HE LATEST GOINGS-ON")
            News1 = "Sir Bruin has organized a tournament. More poems have been pinned to the leafless tree in the courtyard. One of the squires has gone on an absurdly over-ambitious quest."
            ("Gained x1 Current Affairs: Fargyle Keep", "Logbook", 4)
            ("Well, well.", "The Poet-Knights' lives are utterly tranquil. They have no right to look so glum all the time.", "")
        else if (DialogueScreen == "SecondScreen" && Party1 == 1 && WasChallengeSuccessful == 0)
            ("F")
            ("ARGYLE KEEP")
            ("You climb to your feet, somewhat wobbly, and begin to advance a personal pet theory about art's purpose. But your words run away from you, and spill garbled from your mouth. The Knights listen politely until you've ground to a halt, then start talking about something else.")
            ("(You failed an Esoterica challenge...)", "Challenge", 1)
            ("The affair winds down.", "The Knights leave, in dribs and drabs, to sleep or train or compose.", "")
        else if (DialogueScreen == "SecondScreen" && Party2 == 1)
            ("F")
            ("ARGYLE KEEP")
            ("The Knights exclaim in wonder once they have inhaled the colour-dust. " + '"' + "It's like green, but... colder. More icy," + '"' + " says Sir Bruin, staring at the ceiling in wonder. " + '"' + "It's the colour that wine wishes it was!" + '"' + " shouts another Knight.")
            ("For your part, you see strands of something like a purple-gold-black twisting through the air. Only less friendly than purple, and brighter than gold, and duller than black. The memory of that impossible colour will linger for days after, crowding all other thoughts from your mind. What wouldn't you do to see it again?")
            ("Lost x1 Colour-Dust", "Drug", 1)
            ("Gained x1 Haunting Vision", "Logbook", 3)
            ("The affair winds down.", "The Knights leave, in dribs and drabs, to sleep or train or compose.", "")
        else if (DialogueScreen == "SecondScreen" && CaliphusTale == 1)
            ("F")
            ("ARGYLE KEEP")
            ("He is utterly silent as you tell your story. When you are finished, he sighs. " + '"' + "Thank you." + '"')
            ("He gazes into the roaring fireplace for a long time. Just as you think he has nodded off, he starts to speak. This new story is much darker than the others - a story of horrendous things he saw on his travels, of dark deeds covered up, of things he'd rather forget.")
            ("Lost x1 Glimpse of Another World", "Logbook", 3)
            ("Gained x1 Terrible Secret", "Logbook", 4)
            ("Sir Caliphus bids you goodbye.", '"' + "Forgive the ramblings of an old man," + '"' + " he says with a smile.")
        else if (DialogueScreen == "SecondScreen" && BecomePoetKnight == 1)
            ("F")
            ("ARGYLE KEEP")
            ("You meet with the three most respected of the Poet-Knights - Sir Caliphus, grey and venerable. Sir Bruin, leathery and perfectly-coiffed. Lady Juliet, sharp-nosed and muscular. You stroll together through the courtyard, watching the squires practice their archery.")
            ('"' + "Generally those who join our order have trained with us since they were children," + '"' + " says Sir Bruin pleasantly. " + '"' + "I am sorry, wanderer, but we cannot accept you among us." + '"')
            (((('"' + "But there have been exceptions," + '"' + " adds Sir Caliphus, a twinkle in his eye. " + '"' + "And " + oPlayer.PlayerName) + "'s qualifications are obvious. I vote for acceptance.") + '"'))
            ("Sir Bruin blanches. " + '"' + "It seems I have the deciding vote," + '"' + " says Lady Juliet thoughtfully.")
            ("What can you do to convince her?", "She is eyeing you up with obvious appraisal.")
            ("Persuade her.", "You have a way of winning people over."0, 0.8, "Spirit", 91)
        else if (DialogueScreen == "SecondScreen" && BecomePoetKnight3 == 1)
            ("F")
            ("ARGYLE KEEP")
            ('"' + "Excellent." + '"' + " Lady Juliet claps you on the back, making your teeth rattle. " + '"' + "Sort this little matter out, and I will be happy to accept you as a Poet-Knight." + '"')
            ("Concerns updated: A Knightly Quest", "Logbook", 6)
            ("Begin your quest.", "The three Knights bow to you as you turn to leave.")
        else if (DialogueScreen == "SecondScreen" && BecomePoetKnight4 == 1)
            ("F")
            ("ARGYLE KEEP")
            ('"' + "A shame. Return if you change your mind." + '"' + " Lady Juliet turns and begins shouting instructions to the squires-in-training.")
            ("Leave.", "Sir Caliphus bows to you as you turn to leave.")
        else if (DialogueScreen == "SecondScreen" && BecomePoetKnight1 == 1)
            ("F")
            ("ARGYLE KEEP")
            ('"' + "In the past, we have only accepted untrained Poet-Knights who proved their worth with a great quest," + '"' + " says Lady Juliet. " + '"' + "As it happens, I have just such a quest in mind for you, wanderer." + '"')
            ('"' + "One of our former members was led sadly astray," + '"' + " she says. " + '"' + "A Knight by the name of Sir Ezekiel. You may have noticed that the Keep has a... relaxed attitude to mind-altering chemicals, but poor Ezekiel was less able to control himself than most of us. He ended up stealing a number of rare books from our library to pay for his unfortunate habit." + '"')
            ('"' + "We exiled him, of course. He fled to Phobetor Quinn, far to the east, and fell into a kind of servitude beneath a terrible master. I want you to help him get his life back in shape - he will never be a Poet-Knight again, but he deserves better than his current situation." + '"')
            ("Accept Lady Juliet's quest.", "Sir Caliphus is smiling to himself. Sir Bruin is nervously rubbing his jaw.")
            ("Refuse the quest.", "Knighthood isn't enough to warrant such efforts.")
        else if (DialogueScreen == "SecondScreen" && BecomePoetKnight2 == 1 && WasChallengeSuccessful == 1)
            ("F")
            ("ARGYLE KEEP")
            ("Lady Juliet is clearly not a woman who can be easily swayed by fine words, but your words are finer than most. Her cynical half-smile becomes something genuine as you make your case.")
            ('"' + "Very well, you twisted my arm," + '"' + " she says. " + '"' + "I vote to accept you into our order. You would make a fine addition to the Poet-Knights." + '"')
            ("(You passed a Spirit challenge!)", "Challenge", 7)
            ("Accept your knighthood.", "A knighting ceremony is a grand occasion. The entire Keep will turn out to see it.")
        else if (DialogueScreen == "SecondScreen" && BecomePoetKnight2 == 1 && WasChallengeSuccessful == 0)
            ("F")
            ("ARGYLE KEEP")
            ("Lady Juliet listens to your pleas with a smile, then shrugs. " + '"' + "I have a proposal for you, if you care to listen." + '"')
            ("(You failed a Spirit challenge...)", "Challenge", 7)
            ("What can you do to convince her?", "She is eyeing you up with obvious appraisal.")
        else if (DialogueScreen == "SecondScreen" && BecomePoetKnight6 == 1)
            ("F")
            ("ARGYLE KEEP")
            (((("Lady Juliet meets you in the courtyard. She smiles when you tell her of how you helped Zeke. " + '"' + "A quest worthy of a Knight," + '"' + " she says. " + '"' + "You have my vote, " + oPlayer.PlayerName) + ". With Sir Caliphus also backing you, I think it is safe to consider you a Poet-Knight.") + '"'))
            ("Concerns concluded: A Knightly Quest", "Logbook", 6)
            ("Accept your knighthood.", "A knighting ceremony is a grand occasion. The entire Keep will turn out to see it.")
        else if (DialogueScreen == "SecondScreen" && BecomePoetKnight5 == 1)
            ("F")
            ("ARGYLE KEEP")
            ("A knighthood is a grand occasion, especially when the initiate is a stranger to most of the Keep. A whole horde of Knights, squires, servants and scribes turn out to watch you make the long walk up the courtyard. As you ascend the steps you are showered in scraps of torn paper, each with a tiny poem inscribed.")
            ("You kneel before old Sir Caliphus, who lays his blade against your shoulder. Once, twice, thrice. " + '"' + "I dub thee a Knight of Poesy," + '"' + " he declares. " + '"' + "Wielder of sword and pen. Champion of honour and honesty. We sing because we can, and fight because we must. Rise." + '"')
            ("After that you adjourn to the pub, where the Knights sing in your honour and feed you enough whiskey to drown a cat.")
            ("Gained Distinction: Poet-Knight", "Logbook", 1)
            ("Gained x1 Droll Recollection", "Logbook", 3)
            ("You spent 1 day carousing.", "Time", 3)
            ("A rare honour.", "You are now a Poet-Knight.")
                if (!steam_get_achievement("POET_KNIGHT"))
                    steam_set_achievement("POET_KNIGHT")
        else if (DialogueScreen == "LastScreen")
            ("T")
            ("EST")
            ("Successful test.")
            ("Return.", "", "")
    draw_text(((view_wport[(0 << 0)] * 0.5) - 3), ((view_hport[(0 << 0)] * 0.75) - 3), "Fargyle Keep")
    draw_text((view_wport[(0 << 0)] * 0.5), (view_hport[(0 << 0)] * 0.75), "Fargyle Keep")
