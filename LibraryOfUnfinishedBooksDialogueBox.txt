if (BoxMode == "Event")
            oPlayer.LastVisitedForSavePurposes = "The Library of Unfinished Books"
            FileSelected = "SaveFile0.homd"
        else if (DialogueScreen == "BeforeFirstScreen")
            ("T")
            ("HE LIBRARY OF UNFINISHED BOOKS")
            ("A lopsided tower spirals to the ceiling like a snail-shell.")
            ("Head inside.", "Double-doors yawn open at your approach.", "")
        else if (DialogueScreen == "FirstScreen")
                ("T")
                ("HE LIBRARY OF UNFINISHED BOOKS")
                ("A willowy woman sits behind a desk, human apart from the shining trident of horns on her head. They remind you something of a rhinoceros beetle. Oh, and the mandibles, which click eagerly at your approach.")
                if CrewSpeechText("Librarian", 161, "She introduces herself as the Bibliognost. " + '"' + "Have you come far? We don't get many visitors here, so forgive me if when speaking I seem... I don't know, unpractised." + '"', 1)
                    if CrewSpeechText("Librarian", 161, '"' + "We have every book that was never ended. From manuscripts that left the final word untyped, to drafts with only a title and an opening sentence. It's all here." + '"', 2)
                        if NextButton("The Library spirals up eternal, floor after floor of crammed shelves. It's obviously larger on the inside. That should go without saying.", 2)
                                (("New location visited. " + ApprehensionsString), "Logbook", 4)
                                    FileSelected = "SaveFile0.homd"
                            if (oPlayer.LastVisited != "The Library of Unfinished Books" && (ConcernsReturnNumberOfItems(88) == 2 || ConcernsReturnNumberOfItems(88) == 3))
                                if (oPlayer.RecordkeeperWoundsTracker > 0 && oPlayer.Recordkeeper == "Jack of Quills")
                                    ("Search the Library for Jack's Seventh Volume.", "What if Oddkin never finished it?")
                            if (oPlayer.LastVisited != "The Library of Unfinished Books" && global.Library1 == 0 && oInventories.KilledAllMice == 0)
                                ("Does she need any help?", "The Bibliognost's eyes are blue and kind. Her mandibles are constantly twitching.", "")
                            if (oPlayer.LastVisited != "The Library of Unfinished Books" && global.Library2 == 0)
                                ("Browse the unfinished books.", "Maybe you will find something of use.", "")
                            ("Inside the kinetopede.", "Here you can find all miscellaneous options.")
                ("T")
                ("HE LIBRARY OF UNFINISHED BOOKS")
                ("The woman behind the desk appears human, apart from the shining trident of beetle-black horns on her head. Oh, and the mandibles, which click eagerly at your approach.")
                ("The Library spirals up eternal, floor after floor of crammed shelves. It's obviously larger on the inside than on the outside. That should go without saying.")
                if (oPlayer.LastVisited != "The Library of Unfinished Books" && (ConcernsReturnNumberOfItems(88) == 2 || ConcernsReturnNumberOfItems(88) == 3))
                    if (oPlayer.RecordkeeperWoundsTracker > 0 && oPlayer.Recordkeeper == "Jack of Quills")
                        ("Search the Library for Jack's Seventh Volume.", "What if Oddkin never finished it?")
                if (oPlayer.LastVisited != "The Library of Unfinished Books" && global.Library1 == 0 && oInventories.KilledAllMice == 0)
                    ("Does she need any help?", "The Bibliognost's eyes are blue and generous. Her mandibles are constantly twitching.", "")
                if (oPlayer.LastVisited != "The Library of Unfinished Books" && global.Library2 == 0)
                    ("Browse the unfinished books.", "Maybe you will find something of use.", "")
                ("Inside the kinetopede.", "Here you can find all miscellaneous options.")
        else if (DialogueScreen == "SecondScreen" && LeavingTheCity == 1 && TooHeavyToLeaveTheCity == 0)
            ("I")
            ("NTO THE DARK")
            ("Which direction will you go?")
            ("On second thoughts...", "There are matters here that still merit attention.", "#"0, 0.8)
            ("Pore over the map.", "Orient yourself before you launch off into the ravenous dark.")
                    BoxMode = "Map"
            ("North.", "To some kind of prison with a single guard.")
                oPlayer.LastVisited = "The Library of Unfinished Books"
                LeavingSpecialRoomDialogueBox("North")
            ("West.", "Emptyness and locks.")
                oPlayer.LastVisited = "The Library of Unfinished Books"
                LeavingSpecialRoomDialogueBox("West")
            ("East.", "Blood and viscera of slaughtered deities.")
                oPlayer.LastVisited = "The Library of Unfinished Books"
                LeavingSpecialRoomDialogueBox("East")
            ("South.", "Uncharted lands. Old ruins.")
                oPlayer.LastVisited = "The Library of Unfinished Books"
                LeavingSpecialRoomDialogueBox("South")
        else if (DialogueScreen == "SecondScreen" && LeavingTheCity == 1 && TooHeavyToLeaveTheCity == 1)
        else if (DialogueScreen == "SecondScreen" && WanderTheStreets == 1)
            ("T")
            ("HE LIBRARY OF UNFINISHED BOOKS")
            if CrewSpeechText("Librarian", 161, '"' + "I could use some pest control. I am having a terrible problem with mice." + '"', 0)
                if CrewSpeechText("Librarian", 161, '"' + "They keep finishing the books when I'm not looking." + '"', 1)
                    ("Try to find the literary mice.", "You can catch them for a reward. Or perhaps the finished books may be of some use.", "")
                    ("Nod politely, but do not commit yourself.", "You have more important things to do than catch mice.", "")
        else if (DialogueScreen == "SecondScreen" && FindingMice == 1)
            ("T")
            ("HE LIBRARY OF UNFINISHED BOOKS")
            ("Searching the library's dusty upper floors, you soon come across the offending editorializing mice dragging a book across the floor. They vanish squeaking as soon as you approach, a flash of tails disappearing behind the nearest shelf. The book thumps to the floor with a cloud of dust.")
            ("They're too small and quick to be caught in the act.")
            ("Try to find their hiding-place.", "They must have been dragging that book back somewhere...", "Vigilance", 66)
            ("Give up.", "You have more important things to do than catch mice.", "")
        else if (DialogueScreen == "SecondScreen" && FindingMice2 == 1 && WasChallengeSuccessful == 1)
            ("T")
            ("HE LIBRARY OF UNFINISHED BOOKS")
            ("You check the walls for mouse-holes, but no luck. The Library is far too vast for this search. Then, a bolt of inspiration strikes - these are literary mice, right? The Library is all they've ever known.")
            ("You head for the 'M' section. 'ME-','MH-'... 'MI-.' Here you are. You pull a few books from the shelves. In the wall behind there is a circular wooden door the size of a horse's hoof.")
            ("(You passed a Vigilance challenge!)", "Challenge", 0)
            ("Knock politely.", "Anyone home?", "")
            ("Tear the door from its hinges.", "Give them a fright.", "")
        else if (DialogueScreen == "SecondScreen" && FindingMice2 == 1 && WasChallengeSuccessful == 0)
            ("T")
            ("HE LIBRARY OF UNFINISHED BOOKS")
            ("You walk along the Library's walls, kicking them occasionally and checking for mouse-holes. You stop when you realize that you've walked twenty miles and the Library still goes on and on.")
            ("(You failed a Vigilance challenge...)", "Challenge", 0)
            ("Head back.", "This is hopeless.", "")
        else if (DialogueScreen == "SecondScreen" && FindingMice2 == 1 && WasChallengeSuccessful == 1)
            ("T")
            ("HE LIBRARY OF UNFINISHED BOOKS")
            ("You check the walls for mouse-holes, but no luck. The Library is far too vast for this search. Then, a bolt of inspiration strikes - these are literary mice, right? The Library is all they've ever known.")
            ("You head for the 'M' section. 'ME-','MH-'... 'MI-.' Here you are. You pull a few books from the shelves. In the wall behind there is a circular wooden door the size of a horse's hoof.")
            ("(You passed a Vigilance challenge!)", "Challenge", 0)
            ("Knock politely.", "Anyone home?", "")
            ("Tear the door from its hinges.", "Give them a fright.", "")
        else if (DialogueScreen == "SecondScreen" && FindingMice3 == 1)
            ("T")
            ("HE LIBRARY OF UNFINISHED BOOKS")
            ("The door creaks open and a tiny, whiskered face pops out. " + '"' + "Oh no!" + '"' + " it squeaks. " + '"' + "You found us! Quick, lads! Get the flamethrower!" + '"')
            ("It pauses for a second, studying your reaction. Then sighs. " + '"' + "The big 'un didn't fall for it, lads," + '"' + " it calls back into the tunnel behind it. " + '"' + "Right. Right. What is it you want from us, then?" + '"')
            ("Peering past the head mouse, you can see they have carved out a reasonably large hollow for themselves. Several books are propped against the walls, with inkpots and nibbled cheeses next to them. Industrious mice are daubing their paws in the ink and writing delicately on blank pages.")
            ("Ask them to stop finishing the books.", "It rather defeats the purpose of this particular Library.", "")
            ("Grab the mouse and threaten it.", "You don't have the patience for this.", "")
            ("Warn them that the Bibliognost is after them.", "These mice aren't doing any harm. No need to disturb them.", "")
        else if (DialogueScreen == "SecondScreen" && FindingMice4 == 1)
            ("T")
            ("HE LIBRARY OF UNFINISHED BOOKS")
            ("You rip the wooden door from the wall. Behind it, mice are dashing back and forth in a flurry of panic, knocking over inkpots and scattering paper.")
            ('"' + "Get out of here!" + '"' + " squeaks one little mouse, advancing through the empty doorframe with a sharp pencil gripped between its paws. " + '"' + "I'll give you a right poking, you big nasty bastard!" + '"')
            ("Ask the mice to stop finishing the books.", "It rather defeats the purpose of this particular Library.", "")
            ("Grab the mouse and threaten it.", "You don't have the patience for this.", "")
            ("Warn them that the Bibliognost is after them.", "These mice aren't doing any harm. No need to disturb them.", "")
        else if (DialogueScreen == "SecondScreen" && FindingMice5 == 1)
            ("T")
            ("HE LIBRARY OF UNFINISHED BOOKS")
            ('"' + "Oh, come off it, guv," + '"' + " squeaks the head mouse. " + '"' + "Books aren't meant to lie around unfinished like this! It's unnatural! We're doing a public service here. Stories need endings." + '"')
            ("It glances at the books laid out behind it. " + '"' + "Tell you what," + '"' + " it says. " + '"' + "If you agree to leave us alone, we'll give you one of books we just added a conclusion to. Trust me, guv, you'll love it." + '"')
            ("Insist they stop finishing the books.", "You're sorry, but the Bibliognost was very clear.", "")
            ("Grab the mouse and threaten it.", "You don't have the patience for this.", "")
            ("Agree to leave them alone in exchange for a book.", "The mouse squeaks in triumph and does a small, adorable dance.", "")
        else if (DialogueScreen == "SecondScreen" && FindingMice6 == 1)
            ("T")
            ("HE LIBRARY OF UNFINISHED BOOKS")
            ("You snatch the mouse up in your fist. It bites at you viciously, but stops when it sees the expression on your face.")
            ('"' + "Fine, fine, I'm sorry," + '"' + " squeaks the mouse. " + '"' + "No need to get rough with me, guv. We'll put the books back where they belong. Let me down, eh?" + '"')
            ("Let it back down.", "The mouse sadly orders its fellow rodents to start returning the books to the shelves.", "")
            ("Kill all the mice.", "This is pest control, right?", "")
        else if (DialogueScreen == "SecondScreen" && FindingMice7 == 1)
            ("T")
            ("HE LIBRARY OF UNFINISHED BOOKS")
            ('"' + "Much obliged, guv!" + '"' + " shouts the little mouse. " + '"' + "She doesn't give up, does she? Tell you what, take one of our books as a thanks for the tip! Sidney! Fetch the big nice weirdo a book, will you? Sidney! Sidney! What are you doing, Sidney?" + '"' + " The mouse looks back up at you and shrugs as though to say, good grief, isn't Sidney just the worst?")
                ("Finally, a book is dragged out and placed before you. " + '"' + "You'll love this one, guv," + '"' + " says the head mouse. " + '"' + "It's a boring old collection of gloomy essays, but don't worry, we added a conclusion where the author realizes that life isn't meaningless at all, because cheese and books exist!" + '"')
                ("Gained x1 Meandering Treatise", "Cargo", 5)
                ("Finally, a book is dragged out and placed before you. " + '"' + "You'll love this one, guv," + '"' + " says the head mouse. " + '"' + "We ended it with the heroine being saved by a man made of delicious, sentient cheese. Then she eats him! Ha!" + '"')
                ("Gained x1 Penny Dreadful", "Cargo", 5)
                ("Finally, a book is dragged out and placed before you. " + '"' + "This is a weird one, guv," + '"' + " says the head mouse. " + '"' + "It kept trying to gobble us up, and poor Rodney went mad and ascended to a higher plane of being." + '"')
                ("Gained x1 Ancient Grimoire", "Cargo", 5)
            ("Gained x1 Droll Recollection", "Logbook", 3)
            ("Return to the Library's lower floor.", "You tell the Bibliognost you had no luck finding the mice. She glares at you suspiciously.", "")
        else if (DialogueScreen == "SecondScreen" && (FindingMice8 == 1 || FindingMice9 == 1))
            ("T")
            ("HE LIBRARY OF UNFINISHED BOOKS")
                ("The mouse squeaks in sorrow and scuffs its feet. " + '"' + "Ah, but it's what we live for," + '"' + " it says. " + '"' + "...Well. Fine. We give you our word. We will not finish any more books." + '"')
            ("You watch with an eagle eye while the mice return the books to the shelves, then head down to the Bibliognost at the front desk and give her the good news. Her mandibles click with pleasure.")
            (((('"' + "They will be back at it again in a few weeks, I'm sure," + '"' + " she says. " + '"' + "But any little respite from chasing after them is nice. Thank you, " + oPlayer.PlayerName) + ". Here.") + '"'))
            ("Gained 120 G!", "Money", 0)
            ("Invite her back to the kinetopede for a candle-lit meal.", "She must get lonely out here in her Library.", "")
            ("Thank her and leave.", "The Bibliognost waves you off.", "")
        else if (DialogueScreen == "SecondScreen" && FindingMice10 == 1)
            ("T")
            ("HE LIBRARY OF UNFINISHED BOOKS")
            ('"' + "Wonderful, wonderful!" + '"' + " The little mouse claps its paws. " + '"' + "Sidney! Fetch the big nice weirdo a book, will you? Sidney! Sidney! What are you doing, Sidney?" + '"' + " The mouse looks back up at you and shrugs as though to say, good grief, isn't Sidney just the worst?")
                ("Finally, a book is dragged out and placed before you. " + '"' + "You'll love this one, guv," + '"' + " says the head mouse. " + '"' + "It's a boring old collection of gloomy essays, but don't worry, we added a conclusion where the author realizes that life isn't meaningless at all, because cheese and books exist!" + '"')
                ("Gained x1 Meandering Treatise", "Cargo", 5)
                ("Finally, a book is dragged out and placed before you. " + '"' + "You'll love this one, guv," + '"' + " says the head mouse. " + '"' + "We ended it with the heroine being saved by a man made of delicious, sentient cheese. Then she eats him! Ha!" + '"')
                ("Gained x1 Penny Dreadful", "Cargo", 5)
                ("Finally, a book is dragged out and placed before you. " + '"' + "This is a weird one, guv," + '"' + " says the head mouse. " + '"' + "It kept trying to gobble us up, and poor Rodney went mad and ascended to a higher plane of being." + '"')
                ("Gained x1 Ancient Grimoire", "Cargo", 5)
            ("Gained x1 Droll Recollection", "Logbook", 3)
            ("Return to the Library's lower floor.", "You tell the Bibliognost you had no luck finding the mice. She glares at you suspiciously.", "")
        else if (DialogueScreen == "SecondScreen" && FindingMice11 == 1)
            ("T")
            ("HE LIBRARY OF UNFINISHED BOOKS")
                ("The Bibliognost smiles and politely declines. " + '"' + "I'm afraid you don't seem like my type," + '"' + " she says. " + '"' + "But I am flattered." + '"')
                ("Thank her and leave.", "She waves you goodbye.", "")
                ("The Bibliognost smiles and cocks her head. " + '"' + "You know, I think I will take you up on that offer," + '"' + " she says. " + '"' + "It has been a long time, and something about you piques my interest." + '"')
                ("Accompany her to your kinetopede.", "It's not the most romantic place for a date, but there's no real alternative.", "")
                ("Change your mind.", "Actually, you're terribly sorry, but you shouldn't be doing this. You leave her standing forlorn at her desk.", "")
        else if (DialogueScreen == "SecondScreen" && FindingMice12 == 1)
            ("T")
            ("HE LIBRARY OF UNFINISHED BOOKS")
            ("After a pleasant dinner - and a dizzying, scintillating conversation - the Bibliognost grabs your sleeve and practically drags you to bed. You wrap her in your arms and fall onto the cushions, delighting in the feel of her mandibles brushing over your lips like feathers.")
            ("You spend all night together, probably keeping the rest of the crew awake. You don't leave her unfinished.")
            ("Gained x1 Romantic Encounter", "Logbook", 3)
            ("You spent 1 day with the Bibliognost!", "Time", 3)
            ("She leaves the next morning.", '"' + "Come back again," + '"' + " she orders. " + '"' + "I miss you already." + '"', "")
        else if (DialogueScreen == "SecondScreen" && FindingMice13 == 1)
            ("T")
            ("HE LIBRARY OF UNFINISHED BOOKS")
            ("You squeeze your fist. A sad squeak. The other mice dash back and forth in panic: you reach into their home and drag them out one by one.")
            ("When you return to the Bibliognost with a cardboard box full of dead rodents, she backs away in horror. " + '"' + "I never asked you to kill them! I just wanted them to stop finishing the books!" + '"')
            ("She points her finger at you. Her mandibles spread menacingly. " + '"' + "Get out of here. Never come back." + '"')
            ("Leave.", "You toss the dead mice at her feet before you go.", "")
        else if (DialogueScreen == "SecondScreen" && JackQuest == 1)
        else if (DialogueScreen == "SecondScreen" && UnfinishedLibrary == 1)
        else if (DialogueScreen == "SecondScreen" && MiscellaneousEvent == 1)
        else if (DialogueScreen == "SecondScreen" && MiscOptions == 1)
            ("C")
            ("APTAIN'S QUARTERS")
            ("The machine greets you with a steady, soothing hum. In your quarters, you can safely decide what side activity to pursue. Deal with prisoners? Drink something? Operate on your own memories, perhaps?")
            ("Return to location.", "")
        else if (DialogueScreen == "LastScreen")
            ("T")
            ("EST")
            ("Successful test.")
            ("Return.", "", "")
    draw_text(((view_wport[(0 << 0)] * 0.5) - 3), ((view_hport[(0 << 0)] * 0.75) - 3), "The Library of Unfinished Books")
    draw_text((view_wport[(0 << 0)] * 0.5), (view_hport[(0 << 0)] * 0.75), "The Library of Unfinished Books")
