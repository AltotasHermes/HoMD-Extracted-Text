if (BoxMode == "Event")
            oPlayer.LastVisitedForSavePurposes = "The City of Keys"
            FileSelected = "SaveFile0.homd"
        else if (DialogueScreen == "BeforeFirstScreen" && global.BeforeFix == 0)
        else if (DialogueScreen == "BeforeFirstScreen" && global.BeforeFix == 1)
        else if (DialogueScreen == "FirstScreen")
                ("T")
                ("HE CITY OF KEYS")
                ("Even by the kindest estimation the City of Keys has never been a safe place, but recently it has seemed more hostile than usual. Trials and due process have been suspended, and no-one knows when they will return. Soldiers march the streets. Sensible folk stay indoors, making half-hearted plans for when 'all this blows over.'")
                    ("Since the Governor vanished, the Factory has been silent. The Governor's Men seem to be embroiled in a bitter secret war of succession, which leaves actual governance and law enforcement to a few harried bureaucrats and the city watch. Every morning there's a fresh riot, as furious citizens demand to know what's gone wrong.")
                    ("The Governor has been implementing brutal crackdowns to try to keep order. Every day there are riots, and every evening a few more corpses are collected from the gutters.")
                ("The city is one bright spark away from a detonation.")
                    ("Visit your dwellings.", "This is, well, your home. Or at least that's what all the paperwork says.")
                    ("An intricate city-map catches your eye at the station.", "The wall is plastered with a hundred copies of the same poster.")
                    NeedsExperienceItem("Bring glimpses to the Lady of Doves.", "", (("[Requires x7 Glimpses of Another World. You currently have x" + string(ExperiencesReturnNumberOfItems(19))) + ".]")0, 0.8, HasGlim)
                    ("Attend the miners' strike at the Howling Pits.", "You can hear the chanting from here.")
                    ("Drop Peter off at the station.", ".", "[You will lose x1 Passenger: Peter McNally.]"0, 0.8)
                    ("Drop Lucetta off at the station.", ".", "[You will lose x1 Passenger: Lucetta Quetzl.]"0, 0.8)
                    ("Drop your stowaway off at the station.", "The child will no doubt scurry home. If it has a home.", "[You will lose x1 Stowaway.]"0, 0.8)
                    ("A woman is waiting at the station.", "She mutters a pass-phrase as you approach. This is who the Society sent you to rescue.")
                    AndMultipleItemsWithSecondSentence("Distribute Radical Pamphlets on Broad Street.", "And keep an eye out for patrolling watchmen. Political dissidents have a nasty habit of falling down the stairs on the way to the cell.", "[Requires x5 Radical Pamphlets.]"0, 0.8, "Vigilance", 37, NeededPam)
                    NeedsCargoItem("Bomb the Fountain of Bastards.", "Make the grey-bearded firebrand proud.", (("[Requires x3 Gunpowder. You currently have x" + string(CargoReturnNumberOfItems(84))) + ".]")0, 0.8, NeededPam2)
                    NeedsCargoItem("Bomb the fence around Orphan's Town.", "Make the grey-bearded firebrand proud.", (("[Requires x3 Gunpowder. You currently have x" + string(CargoReturnNumberOfItems(84))) + ".]")0, 0.8, NeededPam2)
                    NeedsCargoItem("Bomb the Society for Civean Purity.", "Make the grey-bearded firebrand proud.", (("[Requires x3 Gunpowder. You currently have x" + string(CargoReturnNumberOfItems(84))) + ".]")0, 0.8, NeededPam2)
                    ("Bring your evidence to Vanion Mandible.")
                    ("Bring your evidence to Ambiguity Vilecroft.")
                    if (oPlayer.NavigatorWoundsTracker > 0 && oPlayer.Navigator == "Valeria Bell-Roberts")
                        ("Hunt down the last of Valeria's recalcitrant ghosts.")
                    if (oPlayer.Lightbearer == "Panorama Volt")
                        ("Ask Dr. Grindylow about curing Panorama's affliction.")
                    if (oPlayer.GuardCaptain == "Tybalt Balsamic IV")
                        ("Tybalt wants to confront his father.", "He's going to be a barber, and there's nothing anyone can do about it.")
                    if (oPlayer.NavigatorWoundsTracker > 0 && oPlayer.Navigator == "Cromlech")
                        ("Take Cromlech to register as an ambassador.")
                    if (oPlayer.RecordkeeperWoundsTracker > 0 && oPlayer.Recordkeeper == "Bradley Baggs")
                        NeedsMoney("Drop off Bradley and pay him his money.", "", "[Requires 200 G.]"0, 0.8, 200)
                    if (oPlayer.PilotWoundsTracker > 0 && oPlayer.Pilot == "Augustus Ribbins")
                        ("Help Augustus smuggle Waif out to the Unnamed Society.")
                    if (oPlayer.GuardCaptainWoundsTracker > 0 && oPlayer.GuardCaptain == "Ransack Morton")
                        ("Ransack sets off to inflict some heroism on the unsuspecting public.")
                    if (oPlayer.GuardCaptainWoundsTracker > 0 && oPlayer.GuardCaptain == "Abbas Salem")
                        ("Visit the publishing-house with Abbas.")
                    if (oPlayer.LightbearerWoundsTracker > 0 && oPlayer.Lightbearer == "Otto Von Honbach")
                        ("Take Otto to his home.")
                        ("Check in on Otto.", "A month or more passed. He should have finished his research.")
                    if (oPlayer.Surgeon == "Rotherford")
                        ("Repair your malfunctioning Heartlight.")
                    if (oPlayer.LookoutWoundsTracker > 0 && oPlayer.Lookout == "Spire")
                        ("Accompany Spire to see Dr Grindylow.")
                    if (oPlayer.RecordkeeperWoundsTracker > 0 && oPlayer.Recordkeeper == "Jack of Quills")
                        ("Help Jack search the Rag-Stacks for the Seventh Volume.")
                    if (oPlayer.Surgeon == "Jhang Ba Sho")
                        NeedsCargoItem("Dance in fungal dreams.", "", (("[Requires x1 Dreamsalve. You currently have x" + string(CargoReturnNumberOfItems(1))) + ".]")0, 0.8, HasSalve)
                    if (oPlayer.Surgeon == "Jhang Ba Sho")
                        NeedsCargoItem("Dance in fungal dreams.", "", (("[Requires x1 Dreamsalve. You currently have x" + string(CargoReturnNumberOfItems(1))) + ".]")0, 0.8, HasSalve)
                    if (oPlayer.Lookout == "Nicholas Verdant")
                        ("Accept Nicholas's invitation to the Unnamed Society.")
                    if (oPlayer.Lookout == "Nicholas Verdant")
                        ("Visit the Beggar's God.")
                    ("Tell the Governor's Men where to find the Beggar's God.")
                    NeedsCargoItem("Peacefully euthanize the Beggar's God.", "", (("[Requires x3 Gunpowder and x1 Weapon: God-Harpoon. You currently have x" + string(CargoReturnNumberOfItems(84))) + " Gunpowder.]")0, 0.8, HasPowder)
                    if (oPlayer.ChiefEngineer == "Gladys Skarter")
                        ("Accompany Gladys to her meeting with Dr. Doscheki.")
                    NeedsMoney("Rest and recover.", "The darkness has been getting to all of you. Your crew want a few days to blow off steam.", "[This will recover some of your Sanity, but will cost you 15 guineas.]", 25)
                        ("The Hollow Trumpet's office.", "Vanion, no doubt, is wondering where you are.")
                    else ("The Hollow Trumpet's office.", "Crankshaw Cray is bellowing for you.")
                    ("The Pioneer's office.", "Lady Crumpett will be delighted to see you.")
                        ("The Key Details' office.", "Ambiguity is waiting.")
                        ("The Key Details' office.", "It's your office now.")
                    NeedsInformationItem("Write a freelance article.", "You have returned with news from elsewhere. Time to write it down. Keep the flowery prose to a minimum.", "[Requires x1 Current Affairs from anywhere other than the City of Keys.]", WeHaveTheJournalismItemsNeeded)
                    ((("Visit the " + oPlayer.PlayerName) + " Memorial Museum of Unnatural Curiosity."), "Professor Ambrose Monsoon has extended a proposal. You should visit him, and see if he is serious about this 'museum' business.")
                    ((("Visit the " + oPlayer.PlayerName) + " Memorial Museum of Unnatural Curiosity."), "You have an exhibit to donate, or just want to see how the Museum is progressing.")
                    ((("Visit the " + oPlayer.PlayerName) + " Memorial Museum of Unnatural Curiosity."), "By all accounts, the Museum thrives.")
                        ("Repair your hull.", "The church of Cobblestone will work for you for free.")
                        NeedsMoney("Repair your hull.", "You can have your engineers help out, but it'll still cost ya.", (("[This will cost you " + string(FixCost)) + " guineas.]"), FixCost)
                if (global.ConcernsConcludedFlag[33] == 1 && VisitedEmbassy == 0 && oPlayer.Navigator == "Cromlech" && oPlayer.LastVisited != "The City of Keys" && global.CityofKeys5 == 0)
                    ("Visit Cromlech's embassy.", "A pokey little office on the third floor of a squat building at the back of the Fountain of Bastards.")
                    ("An old friend.", "One of the hawkers you used to run with has sent you a badly-spelled note. He wants to meet you at a pub on Midden Street.", "[This is available because you have Childhood: Hawker.]")
                    ("An old friend.", "Your past in the clergy does not simply disappear just because you did. A friend from those days has tracked you down.", "[This is available because you have Former Profession: Clergy.]")
                if ((oPlayer.LastVisited != "The City of Keys" || oInventories.ThisIsANewGameSoDontGetRidOfWandering == 1) && global.CityofKeys1 == 0)
                    ("Wander the streets.", "Dull booms from inside the Factory. Screams from the Howling Pits. The City awaits you.")
                if (oPlayer.LastVisited != "The City of Keys" && global.CityofKeys2 == 0 && ReputationReturnNumberOfItems(0) > 7)
                    ("You are invited to attend a high-society ball.", "The envelope smells faintly of lilac.", "[This option is available because you have 8+ Reputation: The City of Keys.]")
                    ("A prospective passenger.", "A hunched figure waves you down at the station.")
                    ("Drop off your human passenger.", "", "[They will give you 100 G.]")
                    ("Drop off your ghoul passenger.", "", "[They will give you 100 G.]")
                    ("Drop off your carchar passenger.", "", "[They will give you 100 G.]")
                    ("Drop off your mycena passenger.", "", "[They will give you 100 G.]")
                    ("The Howling Pits.", "You have a contact at the mines. You may be able to buy something illicit.", "[This is available because you have Former Profession: Miner.]")
                    ("The Howling Pits.", "You have a contact at the mines. You may be able to buy something illicit.")
                    ("The black market.", "You have a contact in Sticky End from the old days.", "[This is available because you have Former Profession: Crook.]")
                    ("The black market.", "You know someone in Sticky End. This could be a profitable arrangement.")
                ("Advertise for a new crewmember.", "The Seven Cities have no shortage of useful souls.#")
                ("Inside the kinetopede.", "Here you can find all miscellaneous options.")
                ("T")
                ("HE CITY OF KEYS")
                ("You know the streets here, the accents, the looming skyline. Even the omnipresent sense of menace is, in its own way, comfortingly familiar.")
                ("This is a city of brimming possibilities, each stamped out as quickly as it forms. This is the city that opened a thousand Doors, that founded extracellar colonies. This is the most prolific producer of Keys in all the House.")
                ("But all things must be measured against their cost. Orphan's Town. The Howling Pits. And most of all the Factory, squatting vastly at the centre of the city, a bloated concrete tumour swollen to the size of a dozen castles.")
                ("No matter how far you go, you will bring all this with you.")
                    ("Plan the Factory heist.")
                    ("Tell the Governor where the City of Glass is hiding.", "", "[This will cause the City of Keys to go to war with the Principate.]")
                    ("Misdirect the Governor’s Men in their pursuit of the Trickster.")
                    ("Visit your dwellings.", "This is, well, your home. Or at least that's what all the paperwork says.")
                    ("An intricate city-map catches your eye at the station.", "The wall is plastered with a hundred copies of the same poster.")
                    NeedsExperienceItem("Bring glimpses to the Lady of Doves.", "", (("[Requires x7 Glimpses of Another World. You currently have x" + string(ExperiencesReturnNumberOfItems(19))) + ".]")0, 0.8, HasGlim)
                    ("Attend the miners' strike at the Howling Pits.", "You can hear the chanting from here.")
                    ("Drop Peter off at the station.", ".", "[You will lose x1 Passenger: Peter McNally.]"0, 0.8)
                    ("Drop Lucetta off at the station.", ".", "[You will lose x1 Passenger: Lucetta Quetzl.]"0, 0.8)
                    ("Drop your stowaway off at the station.", "The child will no doubt scurry home. If it has a home.", "[You will lose x1 Stowaway.]"0, 0.8)
                    ("A woman is waiting at the station.", "She mutters a pass-phrase as you approach. This is who the Society sent you to rescue.")
                    AndMultipleItemsWithSecondSentence("Distribute Radical Pamphlets on Broad Street.", "And keep an eye out for patrolling watchmen. Political dissidents have a nasty habit of falling down the stairs on the way to the cell.", "[Requires x5 Radical Pamphlets.]"0, 0.8, "Vigilance", 37, NeededPam)
                    NeedsCargoItem("Bomb the Fountain of Bastards.", "Make the grey-bearded firebrand proud.", (("[Requires x3 Gunpowder. You currently have x" + string(CargoReturnNumberOfItems(84))) + ".]")0, 0.8, NeededPam2)
                    NeedsCargoItem("Bomb the fence around Orphan's Town.", "Make the grey-bearded firebrand proud.", (("[Requires x3 Gunpowder. You currently have x" + string(CargoReturnNumberOfItems(84))) + ".]")0, 0.8, NeededPam2)
                    NeedsCargoItem("Bomb the Society for Civean Purity.", "Make the grey-bearded firebrand proud.", (("[Requires x3 Gunpowder. You currently have x" + string(CargoReturnNumberOfItems(84))) + ".]")0, 0.8, NeededPam2)
                    ("Bring your evidence to Vanion Mandible.")
                    ("Bring your evidence to Ambiguity Vilecroft.")
                    if (oPlayer.NavigatorWoundsTracker > 0 && oPlayer.Navigator == "Valeria Bell-Roberts")
                        ("Hunt down the last of Valeria's recalcitrant ghosts.")
                    if (oPlayer.Lightbearer == "Panorama Volt")
                        ("Ask Dr. Grindylow about curing Panorama's affliction.")
                    if (oPlayer.GuardCaptain == "Tybalt Balsamic IV")
                        ("Tybalt wants to confront his father.", "He's going to be a barber, and there's nothing anyone can do about it.")
                    if (oPlayer.NavigatorWoundsTracker > 0 && oPlayer.Navigator == "Cromlech")
                        ("Take Cromlech to register as an ambassador.")
                    if (oPlayer.RecordkeeperWoundsTracker > 0 && oPlayer.Recordkeeper == "Bradley Baggs")
                        NeedsMoney("Drop off Bradley and pay him his money.", "", "[Requires 200 G.]"0, 0.8, 200)
                    if (oPlayer.PilotWoundsTracker > 0 && oPlayer.Pilot == "Augustus Ribbins")
                        ("Help Augustus smuggle Waif out to the Unnamed Society.")
                    if (oPlayer.GuardCaptainWoundsTracker > 0 && oPlayer.GuardCaptain == "Ransack Morton")
                        ("Ransack sets off to inflict some heroism on the unsuspecting public.")
                    if (oPlayer.GuardCaptainWoundsTracker > 0 && oPlayer.GuardCaptain == "Abbas Salem")
                        ("Visit the publishing-house with Abbas.")
                    if (oPlayer.LightbearerWoundsTracker > 0 && oPlayer.Lightbearer == "Otto Von Honbach")
                        ("Take Otto to his home.")
                        ("Check in on Otto.", "A month or more passed. He should have finished his research.")
                    if (oPlayer.Surgeon == "Rotherford")
                        ("Repair your malfunctioning Heartlight.")
                    if (oPlayer.LookoutWoundsTracker > 0 && oPlayer.Lookout == "Spire")
                        ("Accompany Spire to see Dr Grindylow.")
                    if (oPlayer.RecordkeeperWoundsTracker > 0 && oPlayer.Recordkeeper == "Jack of Quills")
                        ("Help Jack search the Rag-Stacks for the Seventh Volume.")
                    if (oPlayer.Surgeon == "Jhang Ba Sho")
                        NeedsCargoItem("Dance in fungal dreams.", "", (("[Requires x1 Dreamsalve. You currently have x" + string(CargoReturnNumberOfItems(1))) + ".]")0, 0.8, HasSalve)
                    if (oPlayer.Surgeon == "Jhang Ba Sho")
                        NeedsCargoItem("Dance in fungal dreams.", "", (("[Requires x1 Dreamsalve. You currently have x" + string(CargoReturnNumberOfItems(1))) + ".]")0, 0.8, HasSalve)
                    if (oPlayer.Lookout == "Nicholas Verdant")
                        ("Accept Nicholas's invitation to the Unnamed Society.")
                    if (oPlayer.Lookout == "Nicholas Verdant")
                        ("Visit the Beggar's God.")
                    ("Tell the Governor's Men where to find the Beggar's God.")
                    NeedsCargoItem("Peacefully euthanize the Beggar's God.", "", (("[Requires x3 Gunpowder and x1 Weapon: God-Harpoon. You currently have x" + string(CargoReturnNumberOfItems(84))) + " Gunpowder.]")0, 0.8, HasPowder)
                    if (oPlayer.ChiefEngineer == "Gladys Skarter")
                        ("Accompany Gladys to her meeting with Dr. Doscheki.")
                    NeedsMoney("Rest and recover.", "The darkness has been getting to all of you. Your crew want a few days to blow off steam.", "[This will recover some of your Sanity, but will cost you 15 guineas.]", 25)
                        ("The Hollow Trumpet's office.", "Vanion, no doubt, is wondering where you are.")
                    else ("The Hollow Trumpet's office.", "Crankshaw Cray is bellowing for you.")
                    ("The Pioneer's office.", "Lady Crumpett will be delighted to see you.")
                        ("The Key Details' office.", "Ambiguity is waiting.")
                        ("The Key Details' office.", "It's your office now.")
                    NeedsInformationItem("Write a freelance article.", "You have returned with news from elsewhere. Time to write it down. Keep the flowery prose to a minimum.", "[Requires x1 Current Affairs from anywhere other than the City of Keys.]", WeHaveTheJournalismItemsNeeded)
                    NeedsInformationItem("Visit 151 Withering Street.", "If you have information he needs, the Governor's Man is waiting there. If you don't, you arrive and find just an innocent family home, children playing in the garden.", "[Requires sellable Information.]", CanVisitWithering)
                    ((("Visit the " + oPlayer.PlayerName) + " Memorial Museum of Unnatural Curiosity."), "Professor Ambrose Monsoon has extended a proposal. You should visit him, and see if he is serious about this 'museum' business.")
                    ((("Visit the " + oPlayer.PlayerName) + " Memorial Museum of Unnatural Curiosity."), "You have an exhibit to donate, or just want to see how the Museum is progressing.")
                    ((("Visit the " + oPlayer.PlayerName) + " Memorial Museum of Unnatural Curiosity."), "By all accounts, the Museum thrives.")
                        ("Repair your hull.", "The church of Cobblestone will work for you for free.")
                        NeedsMoney("Repair your hull.", "You can have your engineers help out, but it'll still cost ya.", (("[This will cost you " + string(FixCost)) + " guineas.]"), FixCost)
                if (global.ConcernsConcludedFlag[33] == 1 && VisitedEmbassy == 0 && oPlayer.Navigator == "Cromlech" && oPlayer.LastVisited != "The City of Keys" && global.CityofKeys5 == 0)
                    ("Visit Cromlech's embassy.", "A pokey little office on the third floor of a squat building at the back of the Fountain of Bastards.")
                    ("An old friend.", "One of the hawkers you used to run with has sent you a badly-spelled note. He wants to meet you at a pub on Midden Street.", "[This is available because you have Childhood: Hawker.]")
                    ("An old friend.", "Your past in the clergy does not simply disappear just because you did. A friend from those days has tracked you down.", "[This is available because you have Former Profession: Clergy.]")
                if ((oPlayer.LastVisited != "The City of Keys" || oInventories.ThisIsANewGameSoDontGetRidOfWandering == 1) && global.CityofKeys1 == 0)
                    ("Wander the streets.", "Dull booms from inside the Factory. Screams from the Howling Pits. The City awaits you.")
                if (oPlayer.LastVisited != "The City of Keys" && global.CityofKeys2 == 0 && ReputationReturnNumberOfItems(0) > 7)
                    ("You are invited to attend a high-society ball.", "The envelope smells faintly of lilac.", "[This option is available because you have 8+ Reputation: The City of Keys.]")
                    ("A prospective passenger.", "A hunched figure waves you down at the station.")
                    ("Drop off your human passenger.", "", "[They will give you 100 G.]")
                    ("Drop off your ghoul passenger.", "", "[They will give you 100 G.]")
                    ("Drop off your carchar passenger.", "", "[They will give you 100 G.]")
                    ("Drop off your mycena passenger.", "", "[They will give you 100 G.]")
                    ("The Howling Pits.", "You have a contact at the mines. You may be able to buy something illicit.", "[This is available because you have Former Profession: Miner.]")
                    ("The Howling Pits.", "You have a contact at the mines. You may be able to buy something illicit.")
                    ("The black market.", "You have a contact in Sticky End from the old days.", "[This is available because you have Former Profession: Crook.]")
                    ("The black market.", "You know someone in Sticky End. This could be a profitable arrangement.")
                ("Advertise for a new crewmember.", "The Seven Cities have no shortage of useful souls.#")
                ("Inside the kinetopede.", "Here you can find all miscellaneous options.")
                ("T")
                ("HE CITY OF KEYS")
                ("A vast and sordid metropolis. A sprawl of slate roofs and smoke-stacks that stretches for miles in every direction.")
                    ("Plan the Factory heist.")
                    ("Tell the Governor where the City of Glass is hiding.", "", "[This will cause the City of Keys to go to war with the Principate.]")
                    ("Misdirect the Governor’s Men in their pursuit of the Trickster.")
                    if (oPlayer.Lightbearer == "Panorama Volt")
                        ("Ask Dr. Grindylow about curing Panorama's affliction.")
                    if (oPlayer.GuardCaptain == "Tybalt Balsamic IV")
                        ("Tybalt wants to confront his father.", "He's going to be a barber, and there's nothing anyone can do about it.")
                    ("Visit your dwellings.", "This is, well, your home. Or at least that's what all the paperwork says.")
                    ("An intricate city-map catches your eye at the station.", "The wall is plastered with a hundred copies of the same poster.")
                    NeedsExperienceItem("Bring glimpses to the Lady of Doves.", "", (("[Requires x7 Glimpses of Another World. You currently have x" + string(ExperiencesReturnNumberOfItems(19))) + ".]")0, 0.8, HasGlim)
                    ("Attend the miners' strike at the Howling Pits.", "You can hear the chanting from here.")
                    ("Drop Peter off at the station.", ".", "[You will lose x1 Passenger: Peter McNally.]"0, 0.8)
                    ("Drop Lucetta off at the station.", ".", "[You will lose x1 Passenger: Lucetta Quetzl.]"0, 0.8)
                    ("Drop your stowaway off at the station.", "The child will no doubt scurry home. If it has a home.", "[You will lose x1 Stowaway.]"0, 0.8)
                    ("A woman is waiting at the station.", "She mutters a pass-phrase as you approach. This is who the Society sent you to rescue.")
                    AndMultipleItemsWithSecondSentence("Distribute Radical Pamphlets on Broad Street.", "And keep an eye out for patrolling watchmen. Political dissidents have a nasty habit of falling down the stairs on the way to the cell.", "[Requires x5 Radical Pamphlets.]"0, 0.8, "Vigilance", 37, NeededPam)
                    NeedsCargoItem("Bomb the Fountain of Bastards.", "Make the grey-bearded firebrand proud.", (("[Requires x3 Gunpowder. You currently have x" + string(CargoReturnNumberOfItems(84))) + ".]")0, 0.8, NeededPam2)
                    NeedsCargoItem("Bomb the fence around Orphan's Town.", "Make the grey-bearded firebrand proud.", (("[Requires x3 Gunpowder. You currently have x" + string(CargoReturnNumberOfItems(84))) + ".]")0, 0.8, NeededPam2)
                    NeedsCargoItem("Bomb the Society for Civean Purity.", "Make the grey-bearded firebrand proud.", (("[Requires x3 Gunpowder. You currently have x" + string(CargoReturnNumberOfItems(84))) + ".]")0, 0.8, NeededPam2)
                    ("Bring your evidence to Vanion Mandible.")
                    ("Bring your evidence to Ambiguity Vilecroft.")
                    if (oPlayer.NavigatorWoundsTracker > 0 && oPlayer.Navigator == "Valeria Bell-Roberts")
                        ("Hunt down the last of Valeria's recalcitrant ghosts.")
                    if (oPlayer.NavigatorWoundsTracker > 0 && oPlayer.Navigator == "Cromlech")
                        ("Take Cromlech to register as an ambassador.")
                    if (oPlayer.RecordkeeperWoundsTracker > 0 && oPlayer.Recordkeeper == "Bradley Baggs")
                        NeedsMoney("Drop off Bradley and pay him his money.", "", "[Requires 200 G.]"0, 0.8, 200)
                    if (oPlayer.PilotWoundsTracker > 0 && oPlayer.Pilot == "Augustus Ribbins")
                        ("Help Augustus smuggle Waif out to the Unnamed Society.")
                    if (oPlayer.GuardCaptainWoundsTracker > 0 && oPlayer.GuardCaptain == "Ransack Morton")
                        ("Ransack sets off to inflict some heroism on the unsuspecting public.")
                    if (oPlayer.GuardCaptainWoundsTracker > 0 && oPlayer.GuardCaptain == "Abbas Salem")
                        ("Visit the publishing-house with Abbas.")
                    if (oPlayer.LightbearerWoundsTracker > 0 && oPlayer.Lightbearer == "Otto Von Honbach")
                        ("Take Otto to his home.")
                        ("Check in on Otto.", "A month or more passed. He should have finished his research.")
                    if (oPlayer.Surgeon == "Rotherford")
                        ("Repair your malfunctioning Heartlight.")
                    if (oPlayer.LookoutWoundsTracker > 0 && oPlayer.Lookout == "Spire")
                        ("Accompany Spire to see Dr Grindylow.")
                    if (oPlayer.RecordkeeperWoundsTracker > 0 && oPlayer.Recordkeeper == "Jack of Quills")
                        ("Help Jack search the Rag-Stacks for the Seventh Volume.")
                    if (oPlayer.Surgeon == "Jhang Ba Sho")
                        NeedsCargoItem("Dance in fungal dreams.", "", (("[Requires x1 Dreamsalve. You currently have x" + string(CargoReturnNumberOfItems(1))) + ".]")0, 0.8, HasSalve)
                    if (oPlayer.Surgeon == "Jhang Ba Sho")
                        NeedsCargoItem("Dance in fungal dreams.", "", (("[Requires x1 Dreamsalve. You currently have x" + string(CargoReturnNumberOfItems(1))) + ".]")0, 0.8, HasSalve)
                    if (oPlayer.Lookout == "Nicholas Verdant")
                        ("Accept Nicholas's invitation to the Unnamed Society.")
                    if (oPlayer.Lookout == "Nicholas Verdant")
                        ("Visit the Beggar's God.")
                    ("Tell the Governor's Men where to find the Beggar's God.")
                    NeedsCargoItem("Euthanize the Beggar's God.", "", "[Requires x3 Gunpowder and x1 Weapon: God-Harpoon.]"0, 0.8, HasPowder)
                    if (oPlayer.ChiefEngineer == "Gladys Skarter")
                        ("Accompany Gladys to her meeting with Dr. Doscheki.")
                    NeedsMoney("Rest and recover.", "The darkness has been getting to all of you. Your crew want a few days to blow off steam.", "[This will recover some of your Sanity, but will cost you 15 guineas.]", 25)
                        ("The Hollow Trumpet's office.", "Vanion, no doubt, is wondering where you are.")
                    else ("The Hollow Trumpet's office.", "Crankshaw Cray is bellowing for you.")
                    ("The Pioneer's office.", "Lady Crumpett will be delighted to see you.")
                        ("The Key Details' office.", "Ambiguity is waiting.")
                        ("The Key Details' office.", "It's your office now.")
                    NeedsMoney("Gather news.", "Gaggles of hawkers can be found on every corner, spitting and fighting and yelling. A guinea is enough to buy several papers.", "[This will cost you 1 guinea.]", 1)
                    NeedsInformationItem("Write a freelance article.", "You have returned with news from elsewhere. Time to write it down. Keep the flowery prose to a minimum.", "[Requires x1 Current Affairs from anywhere other than the City of Keys.]", WeHaveTheJournalismItemsNeeded)
                    NeedsInformationItem("Visit 151 Withering Street.", "If you have information he needs, the Governor's Man is waiting there. If you don't, you arrive and find just an innocent family home, children playing in the garden.", "[Requires sellable Information.]", CanVisitWithering)
                    ((("Visit the " + oPlayer.PlayerName) + " Memorial Museum of Unnatural Curiosity."), "Professor Ambrose Monsoon has extended a proposal. You should visit him, and see if he is serious about this 'museum' business.")
                    ((("Visit the " + oPlayer.PlayerName) + " Memorial Museum of Unnatural Curiosity."), "You have an exhibit to donate, or just want to see how the Museum is progressing.")
                    ((("Visit the " + oPlayer.PlayerName) + " Memorial Museum of Unnatural Curiosity."), "By all accounts, the Museum thrives.")
                        ("Repair your hull.", "The church of Cobblestone will work for free.")
                        NeedsMoney("Repair your hull.", "You can have your engineers help out, but it'll still cost ya.", (("[This will cost you " + string(FixCost)) + " guineas.]"), FixCost)
                if (global.ConcernsConcludedFlag[33] == 1 && VisitedEmbassy == 0 && oPlayer.Navigator == "Cromlech" && oPlayer.LastVisited != "The City of Keys" && global.CityofKeys5 == 0)
                    ("Visit Cromlech's embassy.", "A pokey little office on the third floor of a squat building at the back of the Fountain of Bastards.")
                    ("An old friend.", "One of the hawkers you used to run with has sent you a badly-spelled note. He wants to meet you at a pub on Midden Street.", "[This is available because you have Childhood: Hawker.]")
                    ("An old friend.", "Your past in the clergy does not simply disappear just because you did. A friend from those days has tracked you down.", "[This is available because you have Former Profession: Clergy.]")
                if ((oPlayer.LastVisited != "The City of Keys" || oInventories.ThisIsANewGameSoDontGetRidOfWandering == 1) && global.CityofKeys1 == 0)
                    ("Wander the streets.", "Dull booms from inside the Factory. Screams from the Howling Pits. The City awaits you.")
                if (oPlayer.LastVisited != "The City of Keys" && global.CityofKeys2 == 0 && ReputationReturnNumberOfItems(0) > 7)
                    ("You are invited to attend a high-society ball.", "The envelope smells faintly of lilac.", "[This option is available because you have 8+ Reputation: The City of Keys.]")
                    ("A prospective passenger.", "A hunched figure waves you down at the station.")
                    ("Drop off your human passenger.", "", "[They will give you 100 G.]")
                    ("Drop off your ghoul passenger.", "", "[They will give you 100 G.]")
                    ("Drop off your carchar passenger.", "", "[They will give you 100 G.]")
                    ("Drop off your mycena passenger.", "", "[They will give you 100 G.]")
                if (oPlayer.LastVisited != "The City of Keys" && DistinctionsCheckForSpecificItem(16) == 1)
                    ("The Howling Pits.", "You have a contact at the mines. You may be able to buy something illicit.", "[This is available because you have Former Profession: Miner.]")
                else if (oInventories.CanVisitHowlingPits == 1 && oPlayer.LastVisited != "The City of Keys")
                    ("The Howling Pits.", "You have a contact at the mines. You may be able to buy something illicit.")
                    ("The black market.", "You have a contact in Sticky End from the old days.", "[This is available because you have Former Profession: Crook.]")
                    ("The black market.", "You know someone in Sticky End. This could be a profitable arrangement.")
                ("Advertise for a new crewmember.", "The Seven Cities have no shortage of useful souls.#")
                ("Inside the kinetopede.", "Here you can find all miscellaneous options.")
        else if (DialogueScreen == "SecondScreen" && LeavingTheCity == 1 && TooHeavyToLeaveTheCity == 0)
            ("I")
            ("NTO THE DARK")
            ("Which direction will you go?")
            ("On second thoughts...", "There are matters here that require further attention.")
            ("Pore over the map.", "Orient yourself before you launch off into the ravenous dark.")
                    BoxMode = "Map"
            ("North.", "North-east to Kennedy Yard; north-west to the City of Angels, in all its glory.")
                oPlayer.LastVisited = "The City of Keys"
                LeavingSpecialRoomDialogueBox("North")
            ("West.", "South-west to the City of Bridges, where one wrong step will send you into the abyss.")
                oPlayer.LastVisited = "The City of Keys"
                LeavingSpecialRoomDialogueBox("West")
            ("East.", "Go far enough, you'll find the strange realms of the Principate.")
                oPlayer.LastVisited = "The City of Keys"
                LeavingSpecialRoomDialogueBox("East")
            ("South.", "To the city where masks wear faces.")
                oPlayer.LastVisited = "The City of Keys"
                LeavingSpecialRoomDialogueBox("South")
        else if (DialogueScreen == "SecondScreen" && HighRepEvent == 1)
        else if (DialogueScreen == "SecondScreen" && FactoryQuest == 1)
        else if (DialogueScreen == "SecondScreen" && LeavingTheCity == 1 && TooHeavyToLeaveTheCity == 1)
        else if (DialogueScreen == "SecondScreen" && VisitBlackMarket == 1)
        else if (DialogueScreen == "SecondScreen" && GladysQuest == 1)
        else if (DialogueScreen == "SecondScreen" && RansackQuest == 1)
        else if (DialogueScreen == "SecondScreen" && AbbasQuest == 1)
        else if (DialogueScreen == "SecondScreen" && RotherfordQuest == 1)
        else if (DialogueScreen == "SecondScreen" && SpireQuest == 1)
        else if (DialogueScreen == "SecondScreen" && BradleyQuest == 1)
        else if (DialogueScreen == "SecondScreen" && JackQuest == 1)
        else if (DialogueScreen == "SecondScreen" && ValeriaQuest == 1)
        else if (DialogueScreen == "SecondScreen" && VisitMuseum == 1)
        else if (DialogueScreen == "SecondScreen" && MuseumQuest == 1)
        else if (DialogueScreen == "SecondScreen" && PeterQuest == 1)
        else if (DialogueScreen == "SecondScreen" && LucettaQuest == 1)
        else if (DialogueScreen == "SecondScreen" && TybaltQuest == 1)
        else if (DialogueScreen == "SecondScreen" && StowawayDropoff == 1)
            ("T")
            ("HE CITY OF KEYS")
            ("You haul out the stowaway by its collar and drop it onto the platform. It offers you a wink and a grin before dashing off and instantly losing itself in the crowd.")
            ("Lost x1 Stowaway", "Cargo", 3)
            ("You're sure another will find its way into your cargo soon enough.", "The city has an endless supply of dispossessed youth.", "")
        else if (DialogueScreen == "SecondScreen" && MuseumProfit == 1)
        else if (DialogueScreen == "SecondScreen" && BlackMarketBuy == 1)
        else if (DialogueScreen == "SecondScreen" && BlackMarketBuy2 == 1)
        else if (DialogueScreen == "SecondScreen" && BlackMarketBuy3 == 1)
        else if (DialogueScreen == "SecondScreen" && BlackMarketSell == 1)
        else if (DialogueScreen == "SecondScreen" && BlackMarketSell2 == 1)
        else if (DialogueScreen == "SecondScreen" && BlackMarketPartners == 1)
        else if (DialogueScreen == "SecondScreen" && VisitTheHowlingPits == 1)
        else if (DialogueScreen == "SecondScreen" && WanderTheStreets == 1)
                    ("T")
                    ("HEOLOGICAL DISCOURSE")
                    ("Steptemple Street is always loud with doomsaying and soothsaying and naysaying. But this is different - a heated debate between two opposing churches has gotten out of hand.")
                    ("The armoured Graveddonites have been thoroughly outwitted by the arguments of the silk-robed Nahashite scholars. Which world spat the Iron Swine into the House? Did he even come here of his own divine will? The Graveddonites answer these questions the only way they know how, with fist and boot and club.")
                    ("Intervene on the Graveddonites' side", "Perhaps the priests of the Undreaming Carcass will be grateful. Besides, they're winning.", "Grit", 26)
                    ("Intervene on the Nahashites' side", "The Serpent's followers seem in need of a saviour.", "Grit", 60)
                    ("Slip away", "This isn't your fight. No need to get involved.")
                    ("H")
                    ("AWKERS!")
                    ("A gang of feral youths are following you on the rooftops above, shouting and spitting and hurling pieces of slate. One smashes perilously close by your head.")
                    ("The tallest and hungriest of the lot leaps down, a razor in one hand, a stack of newspapers in the other. " + '"' + "Read all about it," + '"' + " he snarls through broken teeth.")
                    NeedsMoney("Just buy a bloody newspaper.", "The hawker-gangs are not to be trifled with.", "[This will cost you the outrageous price of 10 guineas]", 10)
                        ("Speak the lingo.", "You were a hawker once.", "")
                    ("Lose them in the alleys.", "You refuse to be drawn into a fight by some reprobate youths.", "Guile", 42)
                    ("Scare them away.", "Some forthright shouting will hopefully send them running.", "Guts", 53)
                        ("Explain that you don't have enough money.", "They look skeptical. " + '"' + "Not even ten G?" + '"')
                    ("T")
                    ("HE HOWLING PITS")
                    ("One of the Pits foremen ambles up to you. The screams are quiet today, he tells you, as though you hadn't noticed. He doesn't ask who you are, or how you got through the dead-zone.")
                    if CrewSpeechText("Foreman", 161, '"' + "Care to see the latest find? Just pulled from the depths this morning." + '"', 1)
                        ('"' + "Of course!" + '"', "", "")
                        ('"' + "No, thank you." + '"', "The screams follow you home.", "")
                    ("T")
                    ("HE HOWLING PITS")
                    ("A watch-officer stops you as you wander toward the dead zone that surrounds the Howling Pits. He's sweating under his waxed moustache.")
                    ('"' + "No entry," + '"' + " he says in a tight voice. " + '"' + "Something escaped from the Pits last night. Again. The Governor's Men are taking care of it." + '"')
                    ("Screams echo over the rooftops. Inhuman, keening cries, familiar to anyone who's spent time near the Pits.")
                    ("The watch-officer's hands shake as he lights his pipe.")
                    ("Offer to stand watch instead.", "With every fresh scream, the watch-officer's face becomes a little paler.", sMoneyArt, 0, 0.8, "Vigilance", 58)
                    ("Leave.", "Seems like it would be best to steer well clear for a while.", "")
                    ("T")
                    ("HE FUNGHETTOS")
                    ("The funghettos spread slowly over the years, inviting unflattering comparisons to rot from Civean Purity fanatics. Bulging columns and protuberances of moist vegetable-matter colonized entire streets. The largest such communities in the City are Sootcup and Dungbird's Nest, but you have ended up wandering into Flea's Ear.")
                    ("Humans rarely come here. Much is made of the stench, but it's not especially unpleasant compared to the fug of dung and smoke which hangs over the rest of the City. Flea's Ear smells of damp soil and old fruit.")
                        ("Mycenae have gathered in bewildering numbers. It's clearly one of the mycenae's 'morel-moots' - some of the Elders must have had a disagreement. The entire community will have been invited to watch and participate in the debate.")
                        NextTextBit = ""
                        NextTextBit = "Mycenae have gathered in bewildering numbers"
                    ((NextTextBit + ", clinging to every available surface on their haphazard fungal structures. At the centre of the throng, two mycenae stand on a raised dais."))
                    AndMultipleItems("Try to follow the debate.", "[Available if you have x1 or more Cultural Knowledge: Mycenae.]", sMoneyArt, 0, 0.8, "Insight", 39, WeHaveTheCultureItemsNeeded)
                    ("Observe the crowd.", "Something isn't quite right here.", "Vigilance", 34)
                    ("Leave.", "The mycenae can be left to their own devices.", "")
                    ("S")
                    ("KINCANDLE SQUARE")
                    ("The Square is thronged with jeering spectators. At the centre, a gallows, and three pale fellows with ropes around their necks.")
                    ('"' + "Three sinners stand before you. Enforcers of the Hangknot Mob." + '"' + " The hangman's reedy voice is barely audible over the crowd. " + '"' + "Guilty of robbery, blackmail, distribution of illegal substances, and multiple counts of murder. May their deaths prove instructional to the rest of their ilk." + '"')
                    ("As the hangman clutches the lever, you notice a woman in the crowd - scarf covering her face - raising a pistol. Aiming with care.")
                    ("Shout a warning.", "", "")
                    ("Wait and watch.", "", "")
                    ("Dive through the crowd towards her.", "Try to wrestle that pistol from her grip.", "Guts", 24)
                    ("S")
                    ("TICKY END")
                    ("Even a lifelong Citizen of Keys can get quickly lost in the winding alleys, and end up accidentally stumbling into Sticky End. You find yourself stepping carefully over puddles of blood and beer, rats skittering away in all directions beneath your feet.")
                    ("A shadow detaches itself from a nearby wall and becomes yours. It follows you, stepping only when you step, masking its footfalls with your own.")
                    ("This is Sticky End. It goes without saying that your new friend has bad intentions. But they don't seem to have noticed you noticing them.")
                    ("Turn to confront them.", "What do they have to say for themselves?", "")
                    ("Run very quickly away.", "A perfectly sensible tactic.", "Guile", 44)
                    ("T")
                    ("HE FUNGHETTOS")
                    ("Sootcup is a burned-out ruin. The Civean Purity fanatics rioted there last night with torches and whiskey-bottle bombs, and drove the mycenae from their burning homes. Dungbird's Nest has been shut down by the watch, with no-one allowed in or out. The mycenae who manage to escape report dismal conditions inside.")
                    ("Flea's Ear is the third-largest of the funghettoes, and here they're fighting back against the groundswell of mindless hatred. Here they've built barricades.")
                    ("A spidery mycena with bile-yellow flesh pokes its head above the parapet, shaking a makeshift spear in one hand. It takes a good look at you.")
                    NeedsRelationshipsItem('"' + "Come in," + '"' + " it says finally.", "As a friend of the mycenae, you are allowed inside.", "[Requires 3+ Reputation: Mycenae.]", sMoneyArt, 0, 0.8, WeHaveTheCultureItemsNeeded)
                    ("Leave.", "The mycena bursts clouds of spores from its cap. You don't know what it's saying, but it won't let you through.", "")
        else if (DialogueScreen == "SecondScreen" && JournalistFriend == 1)
        else if (DialogueScreen == "SecondScreen" && UnnamedSociety == 1)
        else if (DialogueScreen == "SecondScreen" && ClergyOldFriend == 1)
        else if (DialogueScreen == "SecondScreen" && DropOffPassenger == 1)
        else if (DialogueScreen == "SecondScreen" && SubmittingReport == 1)
        else if (DialogueScreen == "SecondScreen" && PanoramaQuest == 1)
        else if (DialogueScreen == "SecondScreen" && OttoQuest == 1)
        else if (DialogueScreen == "SecondScreen" && SecondOttoQuest == 1)
        else if (DialogueScreen == "SecondScreen" && GatheringNews == 1)
        else if (DialogueScreen == "SecondScreen" && RecoveringSanity == 1)
        else if (DialogueScreen == "SecondScreen" && GlassQuest == 1)
        else if (DialogueScreen == "SecondScreen" && JhangQuest == 1)
        else if (DialogueScreen == "SecondScreen" && TricksterQuest == 1)
            ("T")
            ("HE CITY OF KEYS")
            ("You meet him in 121 Withering Street, a Governor’s Man with damp blue eyes and a neat little smile.")
            ("You feed him a slew of nonsense about the Trickster - you saw him in Phobetor Quinn, heading east, accompanied by a black-haired woman.")
            ("+3 Reputation: The City of Keys", "Reputation", 5)
            ("He makes silent notes, then thanks you for your co-operation.", "", "")
        else if (DialogueScreen == "SecondScreen" && CromlechEmbassy1 == 1)
            ("T")
            ("HE CITY OF KEYS")
            ("Cromlech rushed here as soon as you arrived in the City, and he's now busy giving orders to his aides - a mix of enthusiastic well-intentioned activists, and dead-eyed old bureaucrats who have been exiled here as punishment.")
            ("When he can spare a moment, he gushes to you about the developments in his mission to improve goatmen-human relations. The goatmen accepted an ambassador without flaying him! The City has agreed to classify goatmen as something other than 'miscellaneous livestock!'")
            ("And in a hushed voice, he also tells you about other whispers he's heard during his time at the Fountain. The courts are a hotbed of dark histories, sordid cover-ups, and assorted scandals.")
            ("Gained x1 Terrible Secret", "Logbook", 4)
            ("Before he can say more, he's distracted.", "Apparently the goatmen have slaughtered another group of merchants, and Cromlech must immediately deal with the political fallout.", "")
        else if (DialogueScreen == "SecondScreen" && SecondJhangQuest == 1)
        else if (DialogueScreen == "SecondScreen" && AugustusQuest == 1)
        else if (DialogueScreen == "SecondScreen" && NicholasQuest == 1)
        else if (DialogueScreen == "SecondScreen" && SecondNicholasQuest == 1)
        else if (DialogueScreen == "SecondScreen" && ThirdNicholasQuest == 1)
        else if (DialogueScreen == "SecondScreen" && FourthNicholasQuest == 1)
        else if (DialogueScreen == "SecondScreen" && CromlechQuest == 1)
        else if (DialogueScreen == "SecondScreen" && MiscellaneousEvent == 1)
        else if (DialogueScreen == "SecondScreen" && MiscOptions == 1)
            ("C")
            ("APTAIN'S QUARTERS")
            ("The machine greets you with a steady, soothing hum. In your quarters, you can safely decide what side activity to pursue. Deal with prisoners? Drink something? Operate on your own memories, perhaps?")
            ("Return to location.", "")
        else if (DialogueScreen == "SecondScreen" && VisitingDwellings == 1)
        else if (DialogueScreen == "SecondScreen" && MirrorEvent == 1)
            ("You pick up your Fetch-mirror - wearing gloves, of course - and take it back to the cargo hold. This should come in useful if you need to get somewhere in a hurry.")
            ("Gained x1 Fetch-mirror", "Mirror", 1)
            ("Very useful indeed.", "You can pick up another from Dr. Grindylow, should you need it.")
        else if (DialogueScreen == "SecondScreen" && OpeningGameSpiel == 1)
            ("W")
            ("HERE ARE YOU?")
            ("You are in the House - an endless dark expanse of endless dark rooms. Some are born here, others are stolen, and others find their way, but none can leave.")
            ("Who am I?", "", "")
                DialogueScreen = "SeventhScreen"
        else if (DialogueScreen == "SecondScreen" && VisitHollowTrumpetOffice == 1)
        else if (DialogueScreen == "SecondScreen" && VisitKeyDetailsOffice == 1)
        else if (DialogueScreen == "SecondScreen" && VisitKeyDetailsOffice2 == 1)
        else if (DialogueScreen == "SecondScreen" && VisitPioneerOffice == 1)
        else if (DialogueScreen == "SecondScreen" && FixHull == 1)
        else if (DialogueScreen == "SecondScreen" && PickUpPassenger == 1)
            PickingUpPassenger("City of Keys")
        else if (DialogueScreen == "SecondScreen" && WitheringStreet == 1)
        else if (DialogueScreen == "SecondScreen" && AdvertiseForNewCrewmember == 1)
        else if (DialogueScreen == "ThirdScreen" && SellingToNewspaper == 1)
        else if (DialogueScreen == "ThirdScreen" && PioneerLetter == 1)
        else if (DialogueScreen == "ThirdScreen" && AcceptingPositionAtPioneer == 1)
        else if (DialogueScreen == "ThirdScreen" && AcceptingPositionAtHollowTrumpet == 1)
        else if (DialogueScreen == "ThirdScreen" && AcceptingPositionAtKeyDetails == 1)
        else if (DialogueScreen == "ThirdScreen" && AcceptedPositionAtKeyDetails == 1)
        else if (DialogueScreen == "ThirdScreen" && AcceptedPositionAtPioneer == 1)
        else if (DialogueScreen == "ThirdScreen" && AcceptedPositionAtHollowTrumpet == 1)
        else if (DialogueScreen == "ThirdScreen" && HollowTrumpetLetter == 1)
        else if (DialogueScreen == "ThirdScreen" && KeyDetailsLetter == 1)
        else if (DialogueScreen == "ThirdScreen" && StashEventTrigger == 1)
        else if (DialogueScreen == "ThirdScreen" && StashAddEvent == 1)
        else if (DialogueScreen == "ThirdScreen" && StashRemoveEvent == 1)
        else if (DialogueScreen == "ThirdScreen" && TalkingToForeman == 1)
        else if (DialogueScreen == "ThirdScreen" && DetailsQuest == 1)
        else if (DialogueScreen == "ThirdScreen" && Foreman4 == 1)
        else if (DialogueScreen == "ThirdScreen" && Foreman5 == 1)
        else if (DialogueScreen == "ThirdScreen" && Foreman6 == 1)
        else if (DialogueScreen == "ThirdScreen" && Foreman7 == 1)
        else if (DialogueScreen == "ThirdScreen" && Foreman8 == 1)
        else if (DialogueScreen == "ThirdScreen" && ChurchLetter == 1)
        else if (DialogueScreen == "ThirdScreen" && CollegeLetter1 == 1)
        else if (DialogueScreen == "ThirdScreen" && CollegeLetter2 == 1)
        else if (DialogueScreen == "ThirdScreen" && Mourn1 == 1)
            ("S")
            ("TICKY END")
            ("Your would-be mugger turns out to be a round-faced ghoul, a length of rusty pipe clutched in one hand. When you turn to glare at her, she shoves it behind her back and whistles nonchalantly.")
            ('"' + "Don't want no trouble, mate," + '"' + " she says, attempting a smile. " + '"' + "'Ere. Do you want to buy some colour-dust? I've got some 'ere at a very amenable rate." + '"')
            NeedsMoney("Buy x1 Colour-Dust.", "It's a highly illegal drug. But she's right: this is a very amenable rate.", "[Costs 40 G.]", 40)
            ("Hurry away.", "The ghoul tosses her weapon to the floor with a clatter and vanishes into the shadows of a nearby alley.")
        else if (DialogueScreen == "ThirdScreen" && Mourn2 == 1 && WasChallengeSuccessful == 1)
            ("S")
            ("TICKY END")
            ("Your would-be mugger gives chase, but you have no trouble losing them in the alleyways. Soon you're back in one of the more civilized areas of the City, gasping for breath.")
            ("(You passed a Guile challenge!)", "Challenge", 4)
            ("A narrow escape.", "You were lucky not to end up face-down in the sewer.")
        else if (DialogueScreen == "ThirdScreen" && Mourn2 == 1 && WasChallengeSuccessful == 0)
            ("S")
            ("TICKY END")
            ("Your would-be mugger gives chase, and they know the alleyways much better than you do. Your last memory is of a blinding pain in the side of your skull. Then darkness.")
            ("When you wake up, your moneypurse has been emptied and your attacker is nowhere to be seen.")
            ("(You failed a Guile challenge...)", "Challenge", 4)
            ((("Lost " + string(MoneyLoss)) + " G!"), "Money", 4)
            ("Stagger away.", "You were lucky not to end up face-down in the sewer.")
        else if (DialogueScreen == "ThirdScreen" && Mourn3 == 1)
            ("S")
            ("TICKY END")
            ("The ghoul slips you some Colour-Dust in a battered envelope. She counts out your coins carefully, then claps you on the shoulder.")
            ('"' + "I was going to bash a hole in your skull and nick all your stuff," + '"' + " she admits cheerfully. " + '"' + "But now I'm thinking you're alright, mate. Tell you what. Come find me 'ere if you need anything else that the Governor don't want you to have." + '"')
            ('"' + "Name's Lilian, by the way." + '"' + " She grabs your hand and shakes it enthusiastically, her putrid flesh squishing unpleasantly in your grip. " + '"' + "Lilian Mourn. Pleased to meetcher." + '"')
            ("Lost 40 G!", "Money", 0)
            ("Gained x1 Colour-Dust", "Drug", 0)
            ("(You can now visit the black market in Sticky End to buy and sell illegal items.)", "", 0)
            ("Leave.", "Before you go, Lilian warns you not to venture so deep into Sticky End again. " + '"' + "You's lucky I found you and not one of the cannibals," + '"' + " she says cheerily.")
        else if (DialogueScreen == "ThirdScreen" && (WaitWatch == 1 || ShoutWarning == 1))
            ("S")
            ("KINCANDLE SQUARE")
                ("The hangman dives for cover as he hears your shout of warning, but it's not him that she aims for.")
            ("A crack-crack-crack and all three of the condemned fall limp against the rope, blood spreading beneath their prison clothes.")
            ("Before she vanishes into the crowd, the assassin shouts. " + '"' + "We do not hang!" + '"' + " The Hangknot Mob's battlecry, and its prayer. This was not a killing of anger or revenge or vigilantism - this was a dramatic rescue, saving the gangsters from the indignity of the noose.")
            ("Gained x1 Reflection on Mortality.", "Logbook", 3)
            ("The legend of the Hangknot Mob grows.", "The crowd surge forward to dip their handkerchiefs in the blood that soaks the gallows' steps.")
        else if (DialogueScreen == "ThirdScreen" && GrabPistol == 1 && WasChallengeSuccessful == 1)
            ("S")
            ("KINCANDLE SQUARE")
            ("Your hand closes around cold gunmetal. She gives the weapon up after only a momentary struggle, and slips away into the crowd.")
            ("Behind you, the lever slams into place. The condemned men groan as they die. You are left clutching the pistol, your heroics utterly unnoticed.")
            ("(You passed a Guts challenge!)", "Challenge", 3)
            ("Gained x1 Thrilling Yarn.", "Logbook", 3)
            ("The crowd disperse, grumbling.", "The Hangknot Mob's prime boast is that they will never allow their members to hang. Most of the crowd came out to see a dramatic rescue, but the gangsters failed to live up to their bluster.")
        else if (DialogueScreen == "ThirdScreen" && GrabPistol == 1 && WasChallengeSuccessful == 0)
            ("S")
            ("KINCANDLE SQUARE")
            ("Your hand closes around cold gunmetal. The assassin's eyes are wide above the scarf - as you pull at the pistol, she clutches involuntarily at the trigger. The cold metal is suddenly very hot.")
            ("A bullet slams into your thigh. As you collapse, the assassin is already fleeing. The crowd panic around you, screaming and stumbling, almost trampling you in their confusion. Your blood seeps into the cracks between the cobbles.")
            ("You spend 5 days recovering in hospital.", "Time", 1)
            ("(You failed a Guts challenge...)", "Challenge", 3)
            ("Gained +2 Reputation: The City of Keys.", "Reputation", 5)
            ("At least your heroics were noticed.", "It's all over the newspapers. Local poet prevents public assassination.")
        else if (DialogueScreen == "ThirdScreen" && FollowDebate == 1 && WasChallengeSuccessful == 1)
            ("T")
            ("HE FUNGHETTOS")
            ("One of the mycenae on the plinth is a titan, a bile-yellow column on four squat legs, nine or ten feet tall but slender as a reed. The titan's rhetorical opponent is a red-and-pink thing the size of a child, but with a great funnel-shaped head that projects its booming voice far louder.")
            ("The Titan and the Funnel seem to be debating a very fine point of ethics, peppering their quick speeches with bursts of spores which wash over the crowd and presumably communicate some further emotions or nuances. But you can follow the spoken argument, at least; it seems to centre on whether it is morally justified for a mycena to borrow something with the intention to return it, but to never actually do so.")
            ("The debate leaps from point to point at a speed unmatched by any human argument, but it repeatedly doubles back to prior points that you'd assumed had been settled and lays them bare for examination once more. Every point of contention is revisited this way a dozen times or more before being settled.")
            if NextButton("You never get the sense that the watching crowd are rooting for one side or the other. At a stage in the debate that seems totally arbitrary to you, both Funnel and Titan abruptly stop speaking and ask the crowd if they have any questions or issues to raise.", 1)
                ("A forest of fungal hands spring up instantly.")
                ("(You passed an Insight challenge!)", "Challenge", 2)
                ("Gained x1 Cultural Knowledge: Mycenae.", "Logbook", 4)
                ("Ask a question.", "Any human who can ask a serious, appropriate question at a morel-moot will be respected by the mycenae community.", sMoneyArt, 0, 0.8, "Esoterica", 44)
                    
                ("Observe the crowd.", "Something isn't quite right here.", "Vigilance", 34)
                ("Leave.", "The mycenae can be left to their own devices.", "")
        else if (DialogueScreen == "ThirdScreen" && FollowDebate == 1 && WasChallengeSuccessful == 0)
            ("T")
            ("HE FUNGHETTOS")
            ("The two mycenae in the centre are very different. One is a titan, a bile-yellow column on four squat legs, nine or ten feet tall but slender as a reed. The titan's rhetorical opponent is a red-and-pink thing the size of a child, but with a great funnel-shaped head that projects its booming voice far louder than that of the titan.")
            ("The Titan and the Funnel are debating a slippery point of ethics in terms that you can't quite understand. Half of the debate rests on their audience knowing the outcomes of centuries of prior morel-moots, and the other half seems to be made in bursts of spores which wash over the crowd and presumably communicate further emotions and nuances.")
            if NextButton("At a stage in the debate that seems totally arbitrary to you, both Funnel and Titan abruptly stop speaking and ask the crowd if they have any questions.", 1)
                ("A forest of fungal hands spring up instantly, but you're completely lost.")
                ("(You failed an Insight challenge...)", "Challenge", 2)
                ("Observe the crowd.", "Something isn't quite right here.", "Vigilance", 34)
                ("Leave.", "The mycenae can be left to their own devices.", "")
        else if (DialogueScreen == "ThirdScreen" && FollowDebate2 == 1)
            ("T")
            ("HE FUNGHETTOS")
            ("Inside Flea's Ear, you meet a red-and-pink mycena with a funnel-shaped head. The Elder of the district.")
            ("You walk together through the overgrown funghetto. Compared to the rest of the city right now, it seems remarkably tranquil. Then you notice, heaped haphazardly in the central square, a great stockpile of guns and swords and missiles.")
            ('"' + "We mycenae have an unfortunate tendency toward fatalism," + '"' + " says the Elder. " + '"' + "It was difficult to convince us to unite, especially in the face of such odds. It was even more difficult to convince us to bide our time until the right moment." + '"')
            ('"' + "A great change is sweeping our city. If we are not careful, it will sweep us all with it. Do not worry. We intend to be careful." + '"')
            ("Gained x1 Fragment of Epiphany", "Logbook", 3)
            ("Leave.", "The mycenae wave you goodbye. You pass a determined legion of watchmen marching toward the barricade.", "")
        else if (DialogueScreen == "ThirdScreen" && ObserveCrowd == 1 && WasChallengeSuccessful == 1)
            ("T")
            ("HE FUNGHETTOS")
            ("The Elders' debate sounds innocuous enough to you. But the crowds tell a different story.")
            ("Alien though they are, the mycenae exhibit certain tells that are very human. Their silence is not just respectful, but tense. Certain mycenae slip through the crowd with an air of higher purpose, trailing clouds of spores in their wake. Agitators, perhaps?")
            ("The surface-debate is genuine, you suspect. A legitimate point of nuance debated in its own right. But the mycenae are using it to conceal a second debate, coded in spores. Something they don't want humans to hear or understand.")
            if NextButton("You are suddenly ill at ease. This might not be a safe place for you.", 1)
                ("(You passed a Vigilance challenge!)", "Challenge", 0)
                ("Gained x1 Unsettling Conjecture.", "Logbook", 4)
                ("Slip away.", "You feel eyes following you as you leave.", "")
        else if (DialogueScreen == "ThirdScreen" && ObserveCrowd == 1 && WasChallengeSuccessful == 0)
            ("T")
            ("HE FUNGHETTOS")
            ("A gut instinct tells you something here is not right. You scan the crowds for several moments, but mycenae are much harder to read than humans. Their expressions seem perfectly neutral.")
            if NextButton("Perhaps your suspicions were unfounded, then. Still, you no longer feel entirely comfortable in Flea's Ear.", 1)
                ("(You failed a Vigilance challenge...)", "Challenge", 0)
                ("Leave.", "The mycenae can be left to their own devices.", "")
        else if (DialogueScreen == "ThirdScreen" && StandWatch == 1 && WasChallengeSuccessful == 1)
            ("T")
            ("HE HOWLING PITS")
            ("You offer to take over for the night - after all, he's probably needed elsewhere. He attempts to not appear overly grateful.")
            ("Hours of watchfulness later, you spot some scampering shapeless shape crossing the rooftops. You catch a glimpse of trailing tendrils, pale eyes, and a soft grasping thing like a child's hand. Then it is gone, skittering over the slate in near-total silence.")
            ("An instant later, a man and a woman melt from the shadows on either side of you. The man is tall and broad as a coffin. The woman is shorter, and holds a strange-looking pistol in her left hand.")
            ('"' + "Did you see it?" + '"' + " She gestures towards the rooftops with her gun. When you tell them where the thing went, they don't pause to offer gratitude.")
            ("(You passed a Vigilance challenge!)", "Challenge", 0)
            ("Watch them go.", "You've played your part, however small. This could be good fodder for a story, if you embellish a little.", "[You will gain x1 Thrilling Yarn.]")
            ("Follow the Governor's Men.", "Perhaps they could use some help?", "[A matter of pure chance. You may gain a Wound.]")
                
        else if (DialogueScreen == "ThirdScreen" && StandWatch == 1 && WasChallengeSuccessful == 0)
            ("T")
            ("HE HOWLING PITS")
            ("You offer to take over for the night - after all, he's probably needed elsewhere. He attempts to not appear overly grateful.")
            ("Hours of watchfulness later, a man and a woman melt from the shadows on either side of you. The man is tall and broad as a coffin. The woman is shorter, and holds a strange-looking pistol in her left hand.")
            ('"' + "Did you see it?" + '"' + " She gestures towards the rooftops with her gun.")
            ("You hesitate, and she instantly forgets your existence. They take off down the street at a run.")
            ("After, you never hear word of the monster that escaped, nor of the man and woman who pursued it.")
            ("(You failed a Vigilance challenge...)", "Challenge", 0)
            ("But then, the Governor's Men are always discreet.", "You clutch your coat tight around you as you walk away.")
        else if (DialogueScreen == "ThirdScreen" && GraveddonSide == 1 && WasChallengeSuccessful == 1)
            ("T")
            ("HEOLOGICAL DISCOURSE")
            ("You leap into the fray on the Graveddon-priests' side. The Nahashites are mostly already broken and bleeding, and you deliver the remainder a few violent ad hominems.")
            ("After that, it's all over bar the kicking. The priests of Graveddon slap you on the back and promise that the Undreaming Carcass will guide your hand in future battles.")
            ("(You passed a Grit challenge!)", "Challenge", 5)
            ReligionText("Graveddon", 1, 1)
            ReligionText("Nahash", 0, 1)
            ("Enough excitement for one day.", "")
                ReligionItemAdd("Nahash", 0, 1)
                ReligionItemAdd("Graveddon", 1, 1)
        else if (DialogueScreen == "ThirdScreen" && GraveddonSide == 1 && WasChallengeSuccessful == 0)
            ("T")
            ("HEOLOGICAL DISCOURSE")
            ("You leap into the fray on the Graveddon-priests' side. The Nahashites are already broken and bleeding, for the most part.")
            ("One of the priestesses has a staff that coils into life, striking and biting of its own accord as she weaves ophidian circles around her attackers.")
            ("You mostly just blunder about and get in the way. She's unreasonably fast, damn her. You try to strike her and end up hitting one of your allies. After you and the Graveddonites have each received a dozen bites, you are forced to retreat in disarray, the laughter of spectators in your ears.")
            ("Unfortunately, it seems you've won no friends today. Graveddon and his priests hold you in contempt, while of course the Nahashites despise you.")
            ("(You failed a Grit challenge...)", "Challenge", 5)
            ReligionText("Graveddon", 0, 1)
            ReligionText("Nahash", 0, 2)
            ("Enough excitement for one day.", "")
                ReligionItemAdd("Nahash", 0, 2)
                ReligionItemAdd("Graveddon", 0, 1)
        else if (DialogueScreen == "ThirdScreen" && NahashSide == 1 && WasChallengeSuccessful == 1)
            ("T")
            ("HEOLOGICAL DISCOURSE")
            ("This has gone on long enough. The Nahashites are mostly lying in bruised unhappy heaps already, but the Graveddonites continue to bludgeon them with kicks and clubs. You decide it's time to deliver the bully-priests a stern rebuke.")
            ("Clergy of Graveddon tend to think themselves untouchable. You disabuse them of this miconception. They fall back in shock as you begin bowling over priests left and right with well-judged blows.")
            ("Between you and one of the higher-ranking priestesses of Nahash, whose snake-headed staff snaps and bites of its own accord, the bulky war-priests are clearly outmatched. They retreat in confusion, the crowd's laughter chasing them back to their abattoir church.")
            ("(You passed a Grit challenge!)", "Challenge", 5)
            ReligionText("Graveddon", 0, 1)
            ReligionText("Nahash", 1, 1)
            ("Serves them right.", "")
                ReligionItemAdd("Nahash", 1, 1)
                ReligionItemAdd("Graveddon", 0, 1)
        else if (DialogueScreen == "ThirdScreen" && NahashSide == 1 && WasChallengeSuccessful == 0)
            ("T")
            ("HEOLOGICAL DISCOURSE")
            ("This has gone on long enough. The Nahashites are mostly lying in bruised unhappy heaps already, but the Graveddonites continue to bludgeon them with kicks and clubs. You decide to deliver the bullies a stern rebuke.")
            ("You leap into the fray, are immediately met with a bronze-knuckled fist in the face, and go crashing to the cobbles with an explosive sigh.")
            ("The priests of Graveddon eventually return to their abattoir church, singing battle-songs. It's a long time before you're able to stand, and the priests of Nahash are in similarly poor shape. No-one is dead or seriously wounded, at least.")
            ("Despite your failure, the beaten priests thank you sincerely. Nahash, they promise, will fill your dreams with ink and venom.")
            ("(You failed a Grit challenge...)", "Challenge", 5)
            ReligionText("Graveddon", 0, 1)
            ReligionText("Nahash", 1, 1)
            ("Leave and nurse your wounds.", "")
                ReligionItemAdd("Nahash", 1, 1)
                ReligionItemAdd("Graveddon", 0, 1)
        else if (DialogueScreen == "ThirdScreen" && BuyingFromHawkers == 1)
            ("H")
            ("AWKERS!")
            ("The hawker gives you a sickly grin as you pay him for his paper.")
            ("Lost 10 G.", "Money", 0)
            ("Next time they won't be so lucky.", "")
        else if (DialogueScreen == "ThirdScreen" && SpeakingTheLingo == 1)
            ("H")
            ("AWKERS!")
            ("Do these guttersnipes think you're an easy mark? You were fighting for corners before they were even born. You snarl at them in their own lingo, the language of bad ink, a slang of hand-signals and nonsense-phrases.")
            ("The hawkers find it a great wheeze. They pat you on the back and update you on how the hawking world has changed. Some of your lingo was horribly outdated, they tell you, and even give you a free newspaper.")
            ("<Hand signal communicating gratitude>", "")
        else if (DialogueScreen == "ThirdScreen" && EscapingHawkers == 1 && WasChallengeSuccessful == 1)
            ("H")
            ("AWKERS!")
            ("You duck into the nearest alleyway. The hawkers chase you, whooping and hollering like mad things, some on the roofs and others at street-level.")
            ("Finally, you slip into a shadowy doorway, and the few hawkers determined enough to keep on your heels pass by without noticing you. You breathe a sigh of relief. Safe once more from the terrors of having to buy a newspaper.")
            ("(You passed a Guile challenge!)", "Challenge", 4)
            ("Quite enough excitement.", "")
        else if (DialogueScreen == "ThirdScreen" && EscapingHawkers == 1 && WasChallengeSuccessful == 0)
            ("H")
            ("AWKERS!")
            ("You duck into the nearest alleyway. The hawkers chase you, whooping and hollering like mad things, some of them on the roofs and others at street-level. It's a chaotic affair, as you leap over barrels and double back on yourself and attempt to shake them off wherever possible.")
            ("The hawkers are young and eager and they know the alleys better than they know their own mothers. It seems completely impossible to shake them off, and eventually they manage to corner you again.")
            ("(You failed a Guile challenge...)", "Challenge", 4)
            NeedsMoney("Just buy a bloody newspaper.", "The hawker-gangs are not to be trifled with", "[This will cost you the outrageous price of 10 guineas]", 10)
                ("Speak the lingo.", "You were a hawker once.", "")
            ("Refuse to buy a newspaper.", "You have either not enough money or an excess of pride.", "")
                
                ("Explain that you don't have any money.", "They look skeptical. " + '"' + "Not even ten G?" + '"')
        else if (DialogueScreen == "ThirdScreen" && StreetsChallenge == 1 && WasChallengeSuccessful == 1)
            ("H")
            ("AWKERS!")
            ("You let loose a startling bellow and puff yourself to your greatest possible size. The hawkers hesitate, but you roar at them again, and they scatter in terror.")
            ("(You passed a Guts challenge!)", "Challenge", 3)
            ("That showed 'em.", "Too bloody right.")
        else if (DialogueScreen == "ThirdScreen" && StreetsChallenge == 1 && WasChallengeSuccessful == 0)
            ("H")
            ("AWKERS!")
            ("You give it your best shot. You shout, and shriek, and wave your arms. The hawkers are not intimidated. " + '"' + "Read all about it," + '"' + " repeats the big one threateningly, wagging his razor under your nose.")
            ("(You failed a Guts challenge...)", "Challenge", 3)
            NeedsMoney("Just buy a bloody newspaper.", "The hawker-gangs are not to be trifled with", "[This will cost you the outrageous price of 10 guineas]", 10)
                ("Speak the lingo.", "You were a hawker once.", "")
            ("Lose them in the alleys.", "You refuse to be drawn into a fight by these reprobate youths", "Guile", 42)
                ("Explain that you don't have any money.", "They look skeptical. " + '"' + "Not even ten G?" + '"')
        else if (DialogueScreen == "ThirdScreen" && NoMoneyForHawkers == 1)
            ("H")
            ("AWKERS!")
            ("You explain your destitution, and the hawkers retreat into a huddle. Finally their leader - the big, freckled one with bad teeth - approaches you a second time, fiddling with his cap.")
            ('"' + "Listen, mate," + '"' + " he says. " + '"' + "You're obviously in a bad way. We want you to have a newspaper. On the 'ouse." + '"')
            ("He waggles his razor at you. " + '"' + "But don't go telling folks we went soft, now.")
                ("Gained x1 Current Affairs: The City of Keys", "Logbook", 4)
            ('"' + "Er... Thank you." + '"', "An unexpected gesture.", "")
        else if (DialogueScreen == "ThirdScreen" && TakingAMonthOff == 1)
        else if (DialogueScreen == "ThirdScreen" && WorkingOnMasterpiece == 1)
        else if (DialogueScreen == "ThirdScreen" && WritingAdventureNovel == 1)
        else if (DialogueScreen == "ThirdScreen" && WritingHorrorNovel == 1)
        else if (DialogueScreen == "ThirdScreen" && WritingPoetry == 1)
        else if (DialogueScreen == "ThirdScreen" && EntertainingGuest == 1)
        else if (DialogueScreen == "ThirdScreen" && BuyingNewDwellings == 1)
        else if (DialogueScreen == "ThirdScreen" && CompletedKeyDetailsAssignment == 1)
        else if (DialogueScreen == "ThirdScreen" && CompletedHollowTrumpetAssignment == 1)
        else if (DialogueScreen == "ThirdScreen" && TrumpetQuest == 1)
        else if (DialogueScreen == "ThirdScreen" && SecondTrumpetQuest == 1)
        else if (DialogueScreen == "ThirdScreen" && CompletedPioneerAssignment == 1)
        else if (DialogueScreen == "ThirdScreen" && PioneerQuest == 1)
        else if (DialogueScreen == "ThirdScreen" && SubmittingToKeyDetailsPostFreelance == 1)
        else if (DialogueScreen == "ThirdScreen" && SubmittingToKeyDetailsPostEditor == 1)
        else if (DialogueScreen == "ThirdScreen" && SubmittingToHollowTrumpetPostFreelance == 1)
        else if (DialogueScreen == "ThirdScreen" && SubmittingToPioneerPostFreelance == 1)
        else if (DialogueScreen == "ThirdScreen" && NewspaperAdvert == 1)
        else if (DialogueScreen == "ThirdScreen" && PutUpAPoster == 1)
        else if (DialogueScreen == "ThirdScreen" && ContactOldFriend == 1)
            OldFriendEvent("T", "HE CITY OF KEYS")
        else if (DialogueScreen == "FourthScreen" && RefusingToBuyANewspaper == 1)
            ("H")
            ("AWKERS!")
            ("The hawkers seem disbelieving. They whisper amongst themselves for a while. The big one with the ruined teeth shoots you a piercing gaze.")
            ('"' + "You only had to say," + '"' + " he tells you in an aggrieved voice. The hawkers begin to drift in every direction, searching for more pliable victims.")
            ("Well... That went better than expected.", "")
        else if (DialogueScreen == "FourthScreen" && AskQuestion == 1 && WasChallengeSuccessful == 1)
            ("T")
            ("HE FUNGHETTOS")
            ("After a flurry of back-and-forth that lasts for hours, the Funnel Elder finally points to your raised hand, conspicuously fleshy and human.")
            ('"' + "I am surprised to see a human here," + '"' + " it declares in its booming voice. " + '"' + "You are not unwelcome. We need more humans at our moots if we are to foster true change." + '"')
            ("There are several bursts of spores amongst the crowd, and a flurry of murmuring. The Funnel seems to have said something controversial. The Titan's face is inscrutable.")
            ('"' + "Ask your question, then," + '"' + " thunders the Funnel.")
            ("You respond to one of the debate's core points, approaching the matter as a mycena would. You attack an assumption, but also raise the spectre of a possible defence to that attack; and to prove you've been paying attention, you draw on several prior morel-moots that you heard mentioned earlier.")
            ("There are a few murmurs of reluctant appreciation amongst the mycenae, though most are silent. The Funnel Elder rebuts your point gently, spores filling the air as it does so.")
            ("You've made a positive impression. You spot mycenae in the crowd studying you, committing your face to memory.")
            ("(You passed an Esoterica challenge!)", "Challenge", 1)
            ("Gained x1 Cultural Knowledge: Mycenae.", "Logbook", 4)
            ("Gained x1 Reputation: Mycenae.", "Reputation", 5)
            ("Slip away.", "You feel eyes following you as you leave.", "")
        else if (DialogueScreen == "FourthScreen" && AskQuestion == 1 && WasChallengeSuccessful == 1)
            ("T")
            ("HE FUNGHETTOS")
            ("After a flurry of back-and-forth that lasts for hours, the Funnel Elder finally points to your raised hand, conspicuously fleshy and human.")
            ('"' + "I am surprised to see a human here," + '"' + " it declares in its booming voice. " + '"' + "You are not unwelcome. We need more humans at our moots if we are to foster true change." + '"')
            ("There are several bursts of spores amongst the crowd, and a flurry of murmuring. The Funnel seems to have said something controversial. The Titan's face is inscrutable.")
            ('"' + "Ask your question, then," + '"' + " thunders the Funnel.")
            ("You respond to one of the debate's core points, approaching the matter as a mycena would. You attack an assumption, but also raise the spectre of a possible defence to that attack; and to prove you've been paying attention, you draw on several prior morel-moots that you heard mentioned earlier.")
            ("There are a few murmurs of reluctant appreciation amongst the mycenae, though most are silent. The Funnel Elder rebuts your point gently, spores filling the air as it does so.")
            ("You've made a positive impression. You spot mycenae in the crowd studying you, committing your face to memory.")
            ("(You passed an Esoterica challenge!)", "Challenge", 1)
            ("Gained x1 Cultural Knowledge: Mycenae.", "Logbook", 4)
            ("Gained x1 Reputation: Mycenae.", "Reputation", 5)
            ("Slip away.", "You feel eyes following you as you leave.", "")
        else if (DialogueScreen == "FourthScreen" && SubmittingToHollowTrumpet == 1)
        else if (DialogueScreen == "FourthScreen" && SubmittingToPioneer == 1)
        else if (DialogueScreen == "FourthScreen" && SubmittingToKeyDetails == 1)
        else if (DialogueScreen == "FourthScreen" && AskQuestion == 1 && WasChallengeSuccessful == 0)
            ("T")
            ("HE FUNGHETTOS")
            ("After a flurry of back-and-forth that lasts for hours, the Funnel Elder finally points to your raised hand, conspicuously fleshy and human.")
            ('"' + "I am surprised to see a human here," + '"' + " it declares in its booming voice. " + '"' + "You are not unwelcome. We need more humans at our moots if we are to foster true change." + '"')
            ("There are several bursts of spores amongst the crowd, and a flurry of murmuring. The Funnel seems to have said something controversial. The Titan's face is inscrutable.")
            ('"' + "Ask your question, then," + '"' + " thunders the Funnel.")
            ("You respond to one of the debate's core points, attacking several assumptions with vigour, making use of grand rhetorical flourishes and implicitly undermining the credibility of the argument as a whole. As you speak, you feel a distinctly chilly atmosphere develop.")
            ("Once you finish speaking, the Funnel delicately points out a minor flaw in your argument, and then sweeps it under the rug entirely and asks a mycena next to you for their question. You felt that your points deserved much more scrutiny than that.")
            ("You've made an impression, at least, for better or for worse. You spot mycenae in the crowd studying you, committing your face to memory.")
            ("(You failed an Esoterica challenge...)", "Challenge", 1)
                ("Lost x2 Reputation: Mycenae.", "Reputation", 5)
            ("Slip away.", "You feel eyes following you as you leave.", "")
        else if (DialogueScreen == "FourthScreen" && GraveddonMissionary == 1)
            ("T")
            ("HE GRANDMASTER")
            ("The abbatoir-church of Graveddon is dark and crowded; a maze of hooks and hanging meat, organic liquids torrenting down rusty grates, clouds of flies. The air is curdled with animal screams and a metallic stench.")
            ("The Grandmaster's office is tidy and quiet, quite removed from the shrieking butchery. The Grandmaster himself is planted immovably behind the desk, making it look small as a matchbox. Graveddon's will has inflated his size to tumorous grossness.")
            ("The Grandmaster talks mainly in grunts. He doesn't offer any gratitude, though his tiny eyes look at you with grudging respect. " + '"' + "Show Graveddon your strength," + '"' + " he rumbles, " + '"' + "and he will reward you as he has me." + '"')
            ("[You can now preach the word of Graveddon outside the Seven Cities, earning Graveddon's Scrutiny.]", "", 0)
            ("Concerns updated! Gained x1 Missionary: Graveddon", "Logbook", 6)
            ("Return to your home.", "With new purpose.", "")
        else if (DialogueScreen == "FourthScreen" && NahashMissionary == 1)
            ("T")
            ("HE CATECHIST")
            ("The temple to Nahash is an elegant cluster of spires with bronze ophidian statues guarding the gates. Its walls are lined immaculately with bookshelves, its halls empty but for the occasional scholar with their nose buried in a book.")
            ("The Catechist greets you in the temple's indoor garden. She is a small, bald woman with a face like an elderly peach, but her voice cuts sharp as a razor.")
            ('"' + "You can report to me directly with any word of progress amongst the savages," + '"' + " she assures you. " + '"' + "Remember that missionary-work for Nahash involves education. Not conversion." + '"')
            ("[You can now preach the word of Nahash outside the Seven Cities, earning Nahash's Scrutiny.]", "", 0)
            ("Concerns updated! Gained x1 Missionary: Nahash", "Logbook", 6)
            ("Return to your home.", "With new purpose.", "")
        else if (DialogueScreen == "FourthScreen" && AbjahMissionary == 1)
            ("T")
            ("HE PRIORESS")
            ("Abjah's temple is a rickety old building that looks nothing like a church. The inside has been gutted, as though by fire, and instead of an altar there is a deep well.")
            ("The Prioress waits behind the well, her face covered by a veil.")
            ('"' + "Spread word of Abjah," + '"' + " you think she says, but you cannot see her mouth behind the veil, and the voice sounds like it echoes from deep within the well itself. " + '"' + "Bring emptiness to places of colour and shape." + '"')
            ("[You can now preach the word of Abjah outside the Seven Cities, earning Abjah's Scrutiny.]", "", 0)
            ("Concerns updated! Gained x1 Missionary: Abjah", "Logbook", 6)
            ("Return to your home.", "With new purpose.", "")
        else if (DialogueScreen == "FourthScreen" && CobblestoneMissionary == 1)
            ("T")
            ("HE PRESBYTER")
            ("Cobblestone's church on Steptemple Street is a simple building of stone and steeple. The church is crowded with worshippers, praying and lighting candles. Cobblestone has always been a popular god.")
            ("You meet the Presbyter in the cellar, a bearded old man muscled like an ox. He is washing the soot-covered floor with soap. He throws you a brush and tells you to get to work.")
            ('"' + "A good effort," + '"' + " says the Presbyter after a while, surveying the spotless stone slabs under his feet. " + '"' + "Are you the one I was told to expect? Fine, you seem to pull your weight. Go forth and spread the word and all that." + '"')
            ("[You can now preach the word of Cobblestone outside the Seven Cities, earning Cobblestone's Scrutiny.]", "", 0)
            ("Concerns updated! Gained x1 Missionary: Cobblestone", "Logbook", 6)
            ("Return to your home.", "With new purpose.", "")
        else if (DialogueScreen == "FourthScreen" && AnglecrabMissionary == 1)
            ("T")
            ("HE CARDINAL")
            ("The temple of Anglecrab is a structure infamous for occasionally driving passers-by mad. It is a building of a thousand inverting and reverting angles, of corners which fold into each other, of planes which do not align. Simply getting through the door is a challenge. Navigating is a nightmare.")
            ("Eventually you find the Cardinal's office. He is a Saint of Anglecrab, and able to manipulate his own dimensions at a whim - currently he has folded himself into the ceiling, and dangles in roaming triangles of flesh and exposed gut and eyeball. He sucks himself back to normality when he notices your expression.")
            ('"' + "Praise Anglecrab," + '"' + " he says. " + '"' + "Frankly, we're not sure if the Impossible Geometries appreciates missionary-work for its own sake. Just try to stop people making circles and we think Anglecrab will be pleased, as far as it can feel pleasure." + '"')
            ("[You can now preach the word of Anglecrab outside the Seven Cities, earning Anglecrab's Scrutiny.]", "", 0)
            ("Concerns updated! Gained x1 Missionary: Anglecrab", "Logbook", 6)
            ("Return to your home.", "With new purpose.", "")
        else if (DialogueScreen == "FourthScreen" && WyloPanMissionary == 1)
            ("T")
            ("HE HIEROMONK")
            ("The chapel to Wyl o' Pan on Steptemple Street is bathed in the glow of a dozen Heartlights. It's filled with singing and merry-making, but none of the partying worshippers seem to be the person you seek.")
            ("You eventually find the Hieromonk in the chapel's gardens. He is younger than you anticipated, scarcely a day over twenty, and bears an unexpectedly solemn expression.")
            ("He greets you warmly enough, and waves a dismissive hand at the chapel spilling light and song and laughter into the garden. " + '"' + "The Son of Stars is light of all kinds," + '"' + " he tells you. " + '"' + "Not just the warm yellow. You are to be the harsh white, and to blaze in the eyes of heathens." + '"')
            ("[You can now preach the word of Wyl o' Pan outside the Seven Cities, earning Wyl o' Pan's Scrutiny.]", "", 0)
            ("Concerns updated! Gained x1 Missionary: Wyl o' Pan", "Logbook", 6)
            ("Return to your home.", "With new purpose.", "")
        else if (DialogueScreen == "FourthScreen" && MorbazarMissionary == 1)
            ("T")
            ("HE ARCHIMANDRITE")
            ("Morbazar's grand old clocktower looks very impressive from the outside, but inside it reminds you more of the house of an old man who can't bear to throw away various odds and ends. The spiral staircase is narrow, made narrower by dusty bookshelves.")
            ("The clocks on the walls each tell a different time. After thoroughly exploring up and down the tower without finding the Archimandrite, you remember that Morbazar is famed for riddles. This time you pay attention to the clocks, and the directions their hands are pointing.")
            ("You heave open the secret trapdoor eventually. The waiting Archimandrite is nestled in an armchair beside an unlit fireplace, sipping a glass of brandy.")
            ('"' + "Morbazar has always been of the belief that a world where only he-and-she is worshipped would be dreadfully boring," + '"' + " he says. " + '"' + "Conversion of others is neither necessary nor desirable. But he-and-she does want everyone to hear his-and-her stories." + '"')
            ("[You can now preach the word of Morbazar outside the Seven Cities, earning Morbazar's Scrutiny.]", "", 0)
            ("Concerns updated! Gained x1 Missionary: Morbazar", "Logbook", 6)
            ("Return to your home.", "With new purpose.", "")
        else if (DialogueScreen == "FourthScreen" && ScorthidionMissionary == 1)
            ("T")
            ("HE ICHORBISHOP")
            ("The grand cathedral of Scorthidion dominates Steptemple Street. It doubles as a hospital; Scorthidion welcomes the wounded to its sticky embrace.")
            ("You find the Ichorbishop tending to the sick and the dying in the atrium. She is a small but fearsome woman, ageless, hair clamped in an iron-grey bun.")
            ("You can hear her thickened blood crack inside her veins as she looks you up and down.")
            ('"' + "Bend all unbelievers to Scorthidion's will," + '"' + " she commands you. " + '"' + "Tell them they must fear Scorthidion and thank Scorthidion. The Mountainous Scab requires constant tribute." + '"')
            ("[You can now preach the word of Scorthidion outside the Seven Cities, earning Scorthidion's Scrutiny.]", "", 0)
            ("Concerns updated! Gained x1 Missionary: Scorthidion", "Logbook", 6)
            ("Return to your home.", "With new purpose.", "")
        else if (DialogueScreen == "FourthScreen" && AgreedToAnInterview == 1)
            ("A")
            ("N INTERVIEW")
            ("The interview is a pleasant, freewheeling exercise. You invite your old friend into your home and offer him biscuits and anecdotes. He nods and scribbles eagerly as you describe your travels so far.")
            ("When it's published in the Hollow Trumpet, however, it's a complete excoriation, and most of the quotes are made up.")
            ("You receive a note the next day from your old friend. He's bitterly apologetic - most of the vitriol, he explains, was editorial mandate. It made for a more interesting story. By way of apology, he's spoken to his contacts, and he says they're very interested in you.")
            ("+3 Freelancer Reputation with all newspapers.", "Logbook", 6)
            ("-2 Reputation: The City of Keys.", "Reputation", 5)
            ("Return to your home.", "Was that good? Was that a good thing that just happened?", "")
        else if (DialogueScreen == "FourthScreen" && ThirdOpeningGameSpiel == 1)
        else if (DialogueScreen == "FourthScreen" && FollowGovernorsMen == 1 && RandomWoundChance == 1)
            ("T")
            ("HE HOWLING PITS")
            ("You wake up the next day in a hospital bed, wracked by pain in your skull and spine. You have no memory of anything after you followed the Governor's Men, but your back is torn to pieces. Whatever happened, the monster seems to have left its mark on you - and the Governor's Men took your memories for good measure.")
            ("There is little for you to do but wait for the surgeons to patch you up as best they can.")
            ("(You were unlucky!)", "", 0)
            ("You spent 1 day in hospital.", "Time", 0)
            ("If only you knew what happened and what went wrong...", "Curse the Governor's Men and their memory-boxes.")
        else if (DialogueScreen == "FourthScreen" && FollowGovernorsMen == 1 && RandomWoundChance == 0)
            ("T")
            ("HE HOWLING PITS")
            ("You wake up the next day in a run-down hostel with a horrifying migraine and no memory of anything after you followed the Governor's Men. Whatever happened, the government confiscated your memories of it.")
            ("But you must have been of some help, to a greater or lesser extent, because the Governor's Men have left you two memories - the tall man's nod of appreciation, the unremarkable woman's firm handshake.")
            ("You get the feeling that, somewhere in the cavernous halls of the Factory, someone has placed a tick against your name.")
            ("(You were lucky!)", "", 0)
            ("+1 Reputation: The City of Keys.", "Reputation", 3)
            ("Gained x1 Thrilling Yarn.", "Logbook", 3)
            ("You spent 1 day chasing monsters.", "Time", 1)
            ("Leave.", "If only you could remember what you did. Perhaps you can invent a few details...")
        else if (DialogueScreen == "FourthScreen" && WrittenPoem == 1)
        else if (DialogueScreen == "FourthScreen" && EntertainingGuest2 == 1)
        else if (DialogueScreen == "FifthScreen" && FourthOpeningGameSpiel == 1)
        else if (DialogueScreen == "SixthScreen" && FifthOpeningGameSpiel == 1)
        else if (DialogueScreen == "EighthScreen" && SeventhOpeningGameSpiel == 1)
            ("A")
            (" BEGINNING, MIDDLE & END")
            ("Your kinetopede lurches into motion. Mechanical legs scrabble for purchase. Joints screech; the engine roars. You launch yourself, untethered, into the darkness.")
            ("There is an entire House to be discovered, a House churning with secrets and mysteries, a House that is as terrible as it is vast. And it is infinitely vast.")
            ("Good luck", "")
        else if (DialogueScreen == "LastScreen")
            ("T")
            ("EST")
            ("Successful test.")
            ("Return.", "", "")
    draw_text(((view_wport[(0 << 0)] * 0.5) - 3), ((view_hport[(0 << 0)] * 0.75) - 3), "The City of Keys")
    draw_text((view_wport[(0 << 0)] * 0.5), (view_hport[(0 << 0)] * 0.75), "The City of Keys")
